(()=>{var e={};e.id=520,e.ids=[520],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1010:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(2710);s(8491);var n=s(6874),a=s.n(n);function o({children:e}){return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:`${a().className} antialiased`,children:e})})}},1077:()=>{},2067:(e,t,s)=>{Promise.resolve().then(s.bind(s,8767))},2075:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(3582),n=s(4825),a=s(1553),o=s.n(a),i=s(4782),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8767)),"/Users/saunmy/Desktop/nextjs1/nextjs1/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1010)),"/Users/saunmy/Desktop/nextjs1/nextjs1/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,3671,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,8986,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5827,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/saunmy/Desktop/nextjs1/nextjs1/app/login/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2134:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Z,dynamic:()=>Q});var r=s(9260),n=s(9045),a=s(6482);class o extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class i extends o{}i.kind="signIn";class l extends o{}l.type="AdapterError";class c extends o{}c.type="AccessDenied";class d extends o{}d.type="CallbackRouteError";class u extends o{}u.type="ErrorPageLoop";class p extends o{}p.type="EventError";class h extends o{}h.type="InvalidCallbackUrl";class m extends i{constructor(){super(...arguments),this.code="credentials"}}m.type="CredentialsSignin";class x extends o{}x.type="InvalidEndpoints";class b extends o{}b.type="InvalidCheck";class y extends o{}y.type="JWTSessionError";class v extends o{}v.type="MissingAdapter";class g extends o{}g.type="MissingAdapterMethods";class f extends o{}f.type="MissingAuthorize";class w extends o{}w.type="MissingSecret";class P extends i{}P.type="OAuthAccountNotLinked";class k extends i{}k.type="OAuthCallbackError";class E extends o{}E.type="OAuthProfileParseError";class U extends o{}U.type="SessionTokenError";class j extends i{}j.type="OAuthSignInError";class S extends i{}S.type="EmailSignInError";class R extends o{}R.type="SignOutError";class A extends o{}A.type="UnknownAction";class _ extends o{}_.type="UnsupportedStrategy";class N extends o{}N.type="InvalidProvider";class C extends o{}C.type="UntrustedHost";class T extends o{}T.type="Verification";class L extends i{}L.type="MissingCSRF";class $ extends o{}$.type="DuplicateConditionalUI";class I extends o{}I.type="MissingWebAuthnAutocomplete";class q extends o{}q.type="WebAuthnVerificationError";class M extends i{}M.type="AccountNotLinked";class D extends o{}D.type="ExperimentalFeatureNotEnabled";class O extends o{}async function X(e,t,s,r={}){let n=`${H(t)}/${e}`;try{let e={headers:{"Content-Type":"application/json",...r?.headers?.cookie?{cookie:r.headers.cookie}:{}}};r?.body&&(e.body=JSON.stringify(r.body),e.method="POST");let t=await fetch(n,e),s=await t.json();if(!t.ok)throw s;return s}catch(e){return s.error(new O(e.message,e)),null}}function H(e){return`${e.baseUrlServer}${e.basePathServer}`}function G(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let s=new URL(e||t),r=("/"===s.pathname?t.pathname:s.pathname).replace(/\/$/,""),n=`${s.origin}${r}`;return{origin:s.origin,host:s.host,path:r,base:n,toString:()=>n}}let V={baseUrl:G(process.env.NEXTAUTH_URL??process.env.VERCEL_URL).origin,basePath:G(process.env.NEXTAUTH_URL).path,baseUrlServer:G(process.env.NEXTAUTH_URL_INTERNAL??process.env.NEXTAUTH_URL??process.env.VERCEL_URL).origin,basePathServer:G(process.env.NEXTAUTH_URL_INTERNAL??process.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},W=null;function z(){return new BroadcastChannel("next-auth")}let F={debug:console.debug,error:console.error,warn:console.warn};n.createContext?.(void 0);async function J(){let e=await X("csrf",V,F);return e?.csrfToken??""}async function B(){return X("providers",V,F)}async function K(e,t,s){let{redirect:r=!0}=t??{},n=t?.redirectTo??t?.callbackUrl??window.location.href,a=H(V),o=await B();if(!o){window.location.href=`${a}/error`;return}if(!e||!(e in o)){window.location.href=`${a}/signin?${new URLSearchParams({callbackUrl:n})}`;return}let i="credentials"===o[e].type,l="email"===o[e].type,c=`${a}/${i?"callback":"signin"}/${e}`,d=await J(),u=await fetch(`${c}?${new URLSearchParams(s)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:d,callbackUrl:n})}),p=await u.json();if(r||!(i||l)){let e=p.url??n;window.location.href=e,e.includes("#")&&window.location.reload();return}let h=new URL(p.url).searchParams.get("error"),m=new URL(p.url).searchParams.get("code");return u.ok&&await V._getSession({event:"storage"}),{error:h,code:m,status:u.status,ok:u.ok,url:h?null:p.url}}let Q="force-dynamic";function Y(){let e=(0,a.useSearchParams)(),t=(0,a.useRouter)(),s=e.get("redirectTo")||"/learn",[o,i]=(0,n.useState)("user@nextmail.com"),[l,c]=(0,n.useState)("123456"),[d,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(!1);async function m(e){e.preventDefault(),h(!0),u(null);let r=await K("credentials",{email:o,password:l,callbackUrl:s,redirect:!1});r?.ok?t.push(r.url??s):u("账号或密码不正确，请检查邮箱和密码。"),h(!1)}return(0,r.jsxs)("form",{onSubmit:m,className:"w-full max-w-sm rounded-lg border bg-white p-6 shadow",children:[(0,r.jsx)("h1",{className:"mb-4 text-xl font-semibold",children:"登录"}),(0,r.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"邮箱"}),(0,r.jsx)("input",{type:"email",value:o,onChange:e=>i(e.target.value),className:"mb-4 w-full rounded border p-2",placeholder:"you@example.com",required:!0}),(0,r.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"密码"}),(0,r.jsx)("input",{type:"password",value:l,onChange:e=>c(e.target.value),className:"mb-4 w-full rounded border p-2",placeholder:"••••••",required:!0}),d&&(0,r.jsx)("p",{className:"mb-3 text-sm text-red-600",children:d}),(0,r.jsx)("button",{type:"submit",className:"w-full rounded bg-blue-600 p-2 text-white hover:bg-blue-700 disabled:opacity-50",disabled:p,children:p?"登录中...":"登录"}),(0,r.jsx)("p",{className:"mt-3 text-xs text-gray-500",children:"默认账户：user@nextmail.com / 123456"})]})}function Z(){return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-6",children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"text-gray-500",children:"加载中..."}),children:(0,r.jsx)(Y,{})})})}},2307:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6161,23)),Promise.resolve().then(s.t.bind(s,8425,23)),Promise.resolve().then(s.t.bind(s,1553,23)),Promise.resolve().then(s.t.bind(s,3152,23)),Promise.resolve().then(s.t.bind(s,4448,23)),Promise.resolve().then(s.t.bind(s,9556,23)),Promise.resolve().then(s.t.bind(s,3554,23)),Promise.resolve().then(s.t.bind(s,4244,23))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3824:(e,t,s)=>{Promise.resolve().then(s.bind(s,2134))},3873:e=>{"use strict";e.exports=require("path")},6379:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1867,23)),Promise.resolve().then(s.t.bind(s,9751,23)),Promise.resolve().then(s.t.bind(s,2395,23)),Promise.resolve().then(s.t.bind(s,4394,23)),Promise.resolve().then(s.t.bind(s,334,23)),Promise.resolve().then(s.t.bind(s,4722,23)),Promise.resolve().then(s.t.bind(s,5776,23)),Promise.resolve().then(s.t.bind(s,8154,23))},6482:(e,t,s)=>{"use strict";var r=s(9322);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},8491:()=>{},8767:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a,dynamic:()=>n});var r=s(678);let n=(0,r.registerClientReference)(function(){throw Error("Attempted to call dynamic() from the server but dynamic is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/saunmy/Desktop/nextjs1/nextjs1/app/login/page.tsx","dynamic"),a=(0,r.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/saunmy/Desktop/nextjs1/nextjs1/app/login/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/saunmy/Desktop/nextjs1/nextjs1/app/login/page.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9221:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[472,772],()=>s(2075));module.exports=r})();