(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58243,(e,t,r)=>{t.exports=e.r(2594)},93611,e=>{"use strict";var t=e.i(53900),r=e.i(10735),a=e.i(58243),s=e.i(93395);class n extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class o extends n{}async function l(e,t,r,a={}){let s=`${i(t)}/${e}`;try{let e={headers:{"Content-Type":"application/json",...a?.headers?.cookie?{cookie:a.headers.cookie}:{}}};a?.body&&(e.body=JSON.stringify(a.body),e.method="POST");let t=await fetch(s,e),r=await t.json();if(!t.ok)throw r;return r}catch(e){return r.error(new o(e.message,e)),null}}function i(e){return"undefined"==typeof window?`${e.baseUrlServer}${e.basePathServer}`:e.basePath}function c(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let r=new URL(e||t),a=("/"===r.pathname?t.pathname:r.pathname).replace(/\/$/,""),s=`${r.origin}${a}`;return{origin:r.origin,host:r.host,path:a,base:s,toString:()=>s}}let u={baseUrl:c(s.default.env.NEXTAUTH_URL??s.default.env.VERCEL_URL).origin,basePath:c(s.default.env.NEXTAUTH_URL).path,baseUrlServer:c(s.default.env.NEXTAUTH_URL_INTERNAL??s.default.env.NEXTAUTH_URL??s.default.env.VERCEL_URL).origin,basePathServer:c(s.default.env.NEXTAUTH_URL_INTERNAL??s.default.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},d={debug:console.debug,error:console.error,warn:console.warn};async function h(){let e=await l("csrf",u,d);return e?.csrfToken??""}async function m(){return l("providers",u,d)}async function p(e,t,r){let{redirect:a=!0}=t??{},s=t?.redirectTo??t?.callbackUrl??window.location.href,n=i(u),o=await m();if(!o){window.location.href=`${n}/error`;return}if(!e||!(e in o)){window.location.href=`${n}/signin?${new URLSearchParams({callbackUrl:s})}`;return}let l="credentials"===o[e].type,c="email"===o[e].type,d=`${n}/${l?"callback":"signin"}/${e}`,p=await h(),f=await fetch(`${d}?${new URLSearchParams(r)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:p,callbackUrl:s})}),b=await f.json();if(a||!(l||c)){let e=b.url??s;window.location.href=e,e.includes("#")&&window.location.reload();return}let w=new URL(b.url).searchParams.get("error"),g=new URL(b.url).searchParams.get("code");return f.ok&&await u._getSession({event:"storage"}),{error:w,code:g,status:f.status,ok:f.ok,url:w?null:b.url}}function f(){let e=(0,a.useSearchParams)(),s=(0,a.useRouter)(),n=e.get("redirectTo")||"/learn",[o,l]=(0,r.useState)("user@nextmail.com"),[i,c]=(0,r.useState)("123456"),[u,d]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1);async function f(e){e.preventDefault(),m(!0),d(null);let t=await p("credentials",{email:o,password:i,callbackUrl:n,redirect:!1});t?.ok?(s.replace(n),s.refresh()):d("账号或密码不正确，请检查邮箱和密码。"),m(!1)}return(0,t.jsxs)("form",{onSubmit:f,className:"w-full max-w-sm rounded-lg border bg-white p-6 shadow",children:[(0,t.jsx)("h1",{className:"mb-4 text-xl font-semibold",children:"登录"}),(0,t.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"邮箱"}),(0,t.jsx)("input",{type:"email",value:o,onChange:e=>l(e.target.value),className:"mb-4 w-full rounded border p-2",placeholder:"you@example.com",required:!0}),(0,t.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"密码"}),(0,t.jsx)("input",{type:"password",value:i,onChange:e=>c(e.target.value),className:"mb-4 w-full rounded border p-2",placeholder:"••••••",required:!0}),u&&(0,t.jsx)("p",{className:"mb-3 text-sm text-red-600",children:u}),(0,t.jsx)("button",{type:"submit",className:"w-full rounded bg-blue-600 p-2 text-white hover:bg-blue-700 disabled:opacity-50",disabled:h,children:h?"登录中...":"登录"}),(0,t.jsx)("p",{className:"mt-3 text-xs text-gray-500",children:"默认账户：user@nextmail.com / 123456"})]})}function b(){return(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-6",children:(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"text-gray-500",children:"加载中..."}),children:(0,t.jsx)(f,{})})})}r.createContext?.(void 0),e.s(["default",()=>b,"dynamic",0,"force-dynamic"],93611)}]);