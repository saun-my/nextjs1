(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1176:(e,t,s)=>{Promise.resolve().then(s.bind(s,4756))},4582:(e,t,s)=>{"use strict";var n=s(3066);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},4756:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>el,dynamic:()=>er});var n,r,a,l,o,c=s(6384),i=s(6636),u=s.t(i,2),d=s(4582);class h extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class p extends h{}p.kind="signIn";class x extends h{}x.type="AdapterError";class m extends h{}m.type="AccessDenied";class y extends h{}y.type="CallbackRouteError";class b extends h{}b.type="ErrorPageLoop";class f extends h{}f.type="EventError";class g extends h{}g.type="InvalidCallbackUrl";class v extends p{constructor(){super(...arguments),this.code="credentials"}}v.type="CredentialsSignin";class w extends h{}w.type="InvalidEndpoints";class E extends h{}E.type="InvalidCheck";class k extends h{}k.type="JWTSessionError";class S extends h{}S.type="MissingAdapter";class U extends h{}U.type="MissingAdapterMethods";class N extends h{}N.type="MissingAuthorize";class R extends h{}R.type="MissingSecret";class A extends p{}A.type="OAuthAccountNotLinked";class L extends p{}L.type="OAuthCallbackError";class T extends h{}T.type="OAuthProfileParseError";class P extends h{}P.type="SessionTokenError";class _ extends p{}_.type="OAuthSignInError";class j extends p{}j.type="EmailSignInError";class C extends h{}C.type="SignOutError";class I extends h{}I.type="UnknownAction";class O extends h{}O.type="UnsupportedStrategy";class H extends h{}H.type="InvalidProvider";class M extends h{}M.type="UntrustedHost";class X extends h{}X.type="Verification";class V extends p{}V.type="MissingCSRF";class W extends h{}W.type="DuplicateConditionalUI";class $ extends h{}$.type="MissingWebAuthnAutocomplete";class D extends h{}D.type="WebAuthnVerificationError";class q extends p{}q.type="AccountNotLinked";class F extends h{}F.type="ExperimentalFeatureNotEnabled";class J extends h{}async function z(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r="".concat(B(t),"/").concat(e);try{var a;let e={headers:{"Content-Type":"application/json",...(null==n||null==(a=n.headers)?void 0:a.cookie)?{cookie:n.headers.cookie}:{}}};(null==n?void 0:n.body)&&(e.body=JSON.stringify(n.body),e.method="POST");let t=await fetch(r,e),s=await t.json();if(!t.ok)throw s;return s}catch(e){return s.error(new J(e.message,e)),null}}function B(e){return"undefined"==typeof window?"".concat(e.baseUrlServer).concat(e.basePathServer):e.basePath}function G(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let s=new URL(e||t),n=("/"===s.pathname?t.pathname:s.pathname).replace(/\/$/,""),r="".concat(s.origin).concat(n);return{origin:s.origin,host:s.host,path:n,base:r,toString:()=>r}}var K=s(7946);let Q={baseUrl:G(null!=(r=K.env.NEXTAUTH_URL)?r:K.env.VERCEL_URL).origin,basePath:G(K.env.NEXTAUTH_URL).path,baseUrlServer:G(null!=(l=null!=(a=K.env.NEXTAUTH_URL_INTERNAL)?a:K.env.NEXTAUTH_URL)?l:K.env.VERCEL_URL).origin,basePathServer:G(null!=(o=K.env.NEXTAUTH_URL_INTERNAL)?o:K.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},Y=null;function Z(){return new BroadcastChannel("next-auth")}let ee={debug:console.debug,error:console.error,warn:console.warn};null==(n=i.createContext)||n.call(u,void 0);async function et(){var e;let t=await z("csrf",Q,ee);return null!=(e=null==t?void 0:t.csrfToken)?e:""}async function es(){return z("providers",Q,ee)}async function en(e,t,s){var n,r,a;let{redirect:l=!0}=null!=t?t:{},o=null!=(r=null!=(n=null==t?void 0:t.redirectTo)?n:null==t?void 0:t.callbackUrl)?r:window.location.href,c=B(Q),i=await es();if(!i){window.location.href="".concat(c,"/error");return}if(!e||!(e in i)){window.location.href="".concat(c,"/signin?").concat(new URLSearchParams({callbackUrl:o}));return}let u="credentials"===i[e].type,d="email"===i[e].type,h="".concat(c,"/").concat(u?"callback":"signin","/").concat(e),p=await et(),x=await fetch("".concat(h,"?").concat(new URLSearchParams(s)),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:p,callbackUrl:o})}),m=await x.json();if(l||!(u||d)){let e=null!=(a=m.url)?a:o;window.location.href=e,e.includes("#")&&window.location.reload();return}let y=new URL(m.url).searchParams.get("error"),b=new URL(m.url).searchParams.get("code");return x.ok&&await Q._getSession({event:"storage"}),{error:y,code:b,status:x.status,ok:x.ok,url:y?null:m.url}}let er="force-dynamic";function ea(){let e=(0,d.useSearchParams)(),t=(0,d.useRouter)(),s=e.get("redirectTo")||"/learn",[n,r]=(0,i.useState)("user@nextmail.com"),[a,l]=(0,i.useState)("123456"),[o,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(!1);async function x(e){e.preventDefault(),p(!0),u(null);let r=await en("credentials",{email:n,password:a,callbackUrl:s,redirect:!1});if(null==r?void 0:r.ok){var l;t.push(null!=(l=r.url)?l:s)}else u("账号或密码不正确，请检查邮箱和密码。");p(!1)}return(0,c.jsxs)("form",{onSubmit:x,className:"w-full max-w-sm rounded-lg border bg-white p-6 shadow",children:[(0,c.jsx)("h1",{className:"mb-4 text-xl font-semibold",children:"登录"}),(0,c.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"邮箱"}),(0,c.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),className:"mb-4 w-full rounded border p-2",placeholder:"you@example.com",required:!0}),(0,c.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"密码"}),(0,c.jsx)("input",{type:"password",value:a,onChange:e=>l(e.target.value),className:"mb-4 w-full rounded border p-2",placeholder:"••••••",required:!0}),o&&(0,c.jsx)("p",{className:"mb-3 text-sm text-red-600",children:o}),(0,c.jsx)("button",{type:"submit",className:"w-full rounded bg-blue-600 p-2 text-white hover:bg-blue-700 disabled:opacity-50",disabled:h,children:h?"登录中...":"登录"}),(0,c.jsx)("p",{className:"mt-3 text-xs text-gray-500",children:"默认账户：user@nextmail.com / 123456"})]})}function el(){return(0,c.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 p-6",children:(0,c.jsx)(i.Suspense,{fallback:(0,c.jsx)("div",{className:"text-gray-500",children:"加载中..."}),children:(0,c.jsx)(ea,{})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[309,951,358],()=>t(1176)),_N_E=e.O()}]);