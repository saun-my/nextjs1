{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/dashboard/FundLiveTable.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\n\ntype FundItem = {\n  code: string;\n  name: string;\n  net: number | null;\n  dayGrowth: number;\n  lastUpdate: string | null;\n  type: string;\n};\n\nexport default function FundLiveTable() {\n  const [list, setList] = useState<FundItem[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function load() {\n    try {\n      setLoading(true);\n      setError(null);\n      const res = await fetch('/api/funds/list', { cache: 'no-store' });\n      const data = await res.json();\n      setList(Array.isArray(data.list) ? data.list : []);\n    } catch (e: any) {\n      setError(e?.message || '加载失败');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    load();\n    const id = setInterval(load, 30000);\n    return () => clearInterval(id);\n  }, []);\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <div className=\"flex items-center justify-between px-6 py-4\">\n        <div className=\"text-lg font-semibold\">今日热门基金</div>\n        <button onClick={load} className=\"px-3 py-1 text-sm rounded bg-blue-600 text-white\">刷新</button>\n      </div>\n      {error && (\n        <div className=\"px-6 pb-2 text-sm text-red-600\">{error}</div>\n      )}\n      <table className=\"min-w-full\">\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">代码</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">名称</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">日涨跌</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">净值</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">更新时间</th>\n          </tr>\n        </thead>\n        <tbody>\n          {list.map((f) => (\n            <tr key={f.code} className=\"border-t\">\n              <td className=\"px-6 py-3\">{f.code}</td>\n              <td className=\"px-6 py-3\">{f.name}</td>\n              <td className={`px-6 py-3 ${Number(f.dayGrowth) >= 0 ? 'text-green-600' : 'text-red-600'}`}>{f.dayGrowth}%</td>\n              <td className=\"px-6 py-3\">{f.net ?? '-'}</td>\n              <td className=\"px-6 py-3 text-xs text-gray-500\">{f.lastUpdate ?? '-'}</td>\n            </tr>\n          ))}\n          {list.length === 0 && !loading && (\n            <tr>\n              <td className=\"px-6 py-8 text-center text-gray-500\" colSpan={5}>暂无数据</td>\n            </tr>\n          )}\n          {loading && (\n            <tr>\n              <td className=\"px-6 py-8 text-center text-gray-500\" colSpan={5}>加载中...</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAae,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,mTAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,mTAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,mTAAQ,EAAgB;IAElD,eAAe;QACb,IAAI;YACF,WAAW;YACX,SAAS;YACT,MAAM,MAAM,MAAM,MAAM,mBAAmB;gBAAE,OAAO;YAAW;YAC/D,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,MAAM,OAAO,CAAC,KAAK,IAAI,IAAI,KAAK,IAAI,GAAG,EAAE;QACnD,EAAE,OAAO,GAAQ;YACf,SAAS,GAAG,WAAW;QACzB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,oTAAS;mCAAC;YACR;YACA,MAAM,KAAK,YAAY,MAAM;YAC7B;2CAAO,IAAM,cAAc;;QAC7B;kCAAG,EAAE;IAEL,qBACE,uUAAC;QAAI,WAAU;;0BACb,uUAAC;gBAAI,WAAU;;kCACb,uUAAC;wBAAI,WAAU;kCAAwB;;;;;;kCACvC,uUAAC;wBAAO,SAAS;wBAAM,WAAU;kCAAmD;;;;;;;;;;;;YAErF,uBACC,uUAAC;gBAAI,WAAU;0BAAkC;;;;;;0BAEnD,uUAAC;gBAAM,WAAU;;kCACf,uUAAC;wBAAM,WAAU;kCACf,cAAA,uUAAC;;8CACC,uUAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,uUAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,uUAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,uUAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,uUAAC;oCAAG,WAAU;8CAAwD;;;;;;;;;;;;;;;;;kCAG1E,uUAAC;;4BACE,KAAK,GAAG,CAAC,CAAC,kBACT,uUAAC;oCAAgB,WAAU;;sDACzB,uUAAC;4CAAG,WAAU;sDAAa,EAAE,IAAI;;;;;;sDACjC,uUAAC;4CAAG,WAAU;sDAAa,EAAE,IAAI;;;;;;sDACjC,uUAAC;4CAAG,WAAW,CAAC,UAAU,EAAE,OAAO,EAAE,SAAS,KAAK,IAAI,mBAAmB,gBAAgB;;gDAAG,EAAE,SAAS;gDAAC;;;;;;;sDACzG,uUAAC;4CAAG,WAAU;sDAAa,EAAE,GAAG,IAAI;;;;;;sDACpC,uUAAC;4CAAG,WAAU;sDAAmC,EAAE,UAAU,IAAI;;;;;;;mCAL1D,EAAE,IAAI;;;;;4BAQhB,KAAK,MAAM,KAAK,KAAK,CAAC,yBACrB,uUAAC;0CACC,cAAA,uUAAC;oCAAG,WAAU;oCAAsC,SAAS;8CAAG;;;;;;;;;;;4BAGnE,yBACC,uUAAC;0CACC,cAAA,uUAAC;oCAAG,WAAU;oCAAsC,SAAS;8CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9E;GApEwB;KAAA","debugId":null}},
    {"offset": {"line": 252, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/dashboard/FundSearchPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\n\ntype FundDetail = {\n  code: string;\n  name: string;\n  type: string;\n  netWorth: number | null;\n  netWorthDate: string | null;\n  dayGrowth: number;\n  lastMonthGrowth?: number;\n  lastThreeMonthsGrowth?: number;\n  lastYearGrowth?: number;\n};\n\nexport default function FundSearchPanel() {\n  const [code, setCode] = useState('');\n  const [detail, setDetail] = useState<FundDetail | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function search() {\n    if (!code.trim()) return;\n    try {\n      setLoading(true);\n      setError(null);\n      setDetail(null);\n      const res = await fetch(`/api/funds/${encodeURIComponent(code.trim())}`, { cache: 'no-store' });\n      const data = await res.json();\n      const info = Array.isArray(data?.data) ? data.data[0] : null;\n      if (!info) throw new Error('未找到基金信息');\n      setDetail({\n        code: info.code,\n        name: info.name,\n        type: info.type,\n        netWorth: info.netWorth ?? null,\n        netWorthDate: info.netWorthDate ?? null,\n        dayGrowth: Number(info.dayGrowth ?? 0),\n        lastMonthGrowth: info.lastMonthGrowth != null ? Number(info.lastMonthGrowth) : undefined,\n        lastThreeMonthsGrowth: info.lastThreeMonthsGrowth != null ? Number(info.lastThreeMonthsGrowth) : undefined,\n        lastYearGrowth: info.lastYearGrowth != null ? Number(info.lastYearGrowth) : undefined,\n      });\n    } catch (e: any) {\n      setError(e?.message || '查询失败');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div>\n      <div className=\"px-6 py-4 border-b flex items-center gap-3\">\n        <div className=\"text-lg font-semibold\">基金代码查询</div>\n        <div className=\"flex items-center gap-2 ml-auto\">\n          <input\n            className=\"border rounded px-3 py-1 text-sm\"\n            placeholder=\"如 110022\"\n            value={code}\n            onChange={(e) => setCode(e.target.value)}\n          />\n          <button onClick={search} className=\"px-3 py-1 text-sm rounded bg-blue-600 text-white\">查询</button>\n        </div>\n      </div>\n      {error && <div className=\"px-6 pt-2 text-sm text-red-600\">{error}</div>}\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-full\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">代码</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">名称</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">类型</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">净值</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">净值日期</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">日涨跌</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">近一月</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">近三月</th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">近一年</th>\n            </tr>\n          </thead>\n          <tbody>\n            {loading && (\n              <tr><td className=\"px-6 py-8 text-center text-gray-500\" colSpan={9}>加载中...</td></tr>\n            )}\n            {!loading && detail && (\n              <tr className=\"border-t\">\n                <td className=\"px-6 py-3\">{detail.code}</td>\n                <td className=\"px-6 py-3\">{detail.name}</td>\n                <td className=\"px-6 py-3\">{detail.type}</td>\n                <td className=\"px-6 py-3\">{detail.netWorth ?? '-'}</td>\n                <td className=\"px-6 py-3 text-xs text-gray-500\">{detail.netWorthDate ?? '-'}</td>\n                <td className={`px-6 py-3 ${Number(detail.dayGrowth) >= 0 ? 'text-green-600' : 'text-red-600'}`}>{detail.dayGrowth}%</td>\n                <td className=\"px-6 py-3\">{detail.lastMonthGrowth != null ? `${detail.lastMonthGrowth}%` : '-'}</td>\n                <td className=\"px-6 py-3\">{detail.lastThreeMonthsGrowth != null ? `${detail.lastThreeMonthsGrowth}%` : '-'}</td>\n                <td className=\"px-6 py-3\">{detail.lastYearGrowth != null ? `${detail.lastYearGrowth}%` : '-'}</td>\n              </tr>\n            )}\n            {!loading && !detail && (\n              <tr><td className=\"px-6 py-8 text-center text-gray-500\" colSpan={9}>请输入基金代码查询</td></tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}