{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/lib/placeholder-data.ts"],"sourcesContent":["// This file contains placeholder data that you'll be replacing with real data in the Data Fetching chapter:\n// https://nextjs.org/learn/dashboard-app/fetching-data\nconst users = [\n  {\n    id: '410544b2-4001-4271-9855-fec4b6a6442a',\n    name: 'User',\n    email: 'user@nextmail.com',\n    password: '123456',\n  },\n];\n\nconst customers = [\n  {\n    id: 'd6e15727-9fe1-4961-8c5b-ea44a9bd81aa',\n    name: 'Evil Rabbit',\n    email: 'evil@rabbit.com',\n    image_url: '/customers/evil-rabbit.png',\n  },\n  {\n    id: '3958dc9e-712f-4377-85e9-fec4b6a6442a',\n    name: 'Delba de Oliveira',\n    email: 'delba@oliveira.com',\n    image_url: '/customers/delba-de-oliveira.png',\n  },\n  {\n    id: '3958dc9e-742f-4377-85e9-fec4b6a6442a',\n    name: 'Lee Robinson',\n    email: 'lee@robinson.com',\n    image_url: '/customers/lee-robinson.png',\n  },\n  {\n    id: '76d65c26-f784-44a2-ac19-586678f7c2f2',\n    name: 'Michael Novotny',\n    email: 'michael@novotny.com',\n    image_url: '/customers/michael-novotny.png',\n  },\n  {\n    id: 'CC27C14A-0ACF-4F4A-A6C9-D45682C144B9',\n    name: 'Amy Burns',\n    email: 'amy@burns.com',\n    image_url: '/customers/amy-burns.png',\n  },\n  {\n    id: '13D07535-C59E-4157-A011-F8D2EF4E0CBB',\n    name: 'Balazs Orban',\n    email: 'balazs@orban.com',\n    image_url: '/customers/balazs-orban.png',\n  },\n];\n\nconst invoices = [\n  {\n    customer_id: customers[0].id,\n    amount: 15795,\n    status: 'pending',\n    date: '2022-12-06',\n  },\n  {\n    customer_id: customers[1].id,\n    amount: 20348,\n    status: 'pending',\n    date: '2022-11-14',\n  },\n  {\n    customer_id: customers[4].id,\n    amount: 3040,\n    status: 'paid',\n    date: '2022-10-29',\n  },\n  {\n    customer_id: customers[3].id,\n    amount: 44800,\n    status: 'paid',\n    date: '2023-09-10',\n  },\n  {\n    customer_id: customers[5].id,\n    amount: 34577,\n    status: 'pending',\n    date: '2023-08-05',\n  },\n  {\n    customer_id: customers[2].id,\n    amount: 54246,\n    status: 'pending',\n    date: '2023-07-16',\n  },\n  {\n    customer_id: customers[0].id,\n    amount: 666,\n    status: 'pending',\n    date: '2023-06-27',\n  },\n  {\n    customer_id: customers[3].id,\n    amount: 32545,\n    status: 'paid',\n    date: '2023-06-09',\n  },\n  {\n    customer_id: customers[4].id,\n    amount: 1250,\n    status: 'paid',\n    date: '2023-06-17',\n  },\n  {\n    customer_id: customers[5].id,\n    amount: 8546,\n    status: 'paid',\n    date: '2023-06-07',\n  },\n  {\n    customer_id: customers[1].id,\n    amount: 500,\n    status: 'paid',\n    date: '2023-08-19',\n  },\n  {\n    customer_id: customers[5].id,\n    amount: 8945,\n    status: 'paid',\n    date: '2023-06-03',\n  },\n  {\n    customer_id: customers[2].id,\n    amount: 1000,\n    status: 'paid',\n    date: '2022-06-05',\n  },\n];\n\nconst revenue = [\n  { month: 'Jan', revenue: 2000 },\n  { month: 'Feb', revenue: 1800 },\n  { month: 'Mar', revenue: 2200 },\n  { month: 'Apr', revenue: 2500 },\n  { month: 'May', revenue: 2300 },\n  { month: 'Jun', revenue: 3200 },\n  { month: 'Jul', revenue: 3500 },\n  { month: 'Aug', revenue: 3700 },\n  { month: 'Sep', revenue: 2500 },\n  { month: 'Oct', revenue: 2800 },\n  { month: 'Nov', revenue: 3000 },\n  { month: 'Dec', revenue: 4800 },\n];\n\nexport { users, customers, invoices, revenue };\n"],"names":[],"mappings":"AAAA,4GAA4G;AAC5G,uDAAuD;;;;;;;;;;;AACvD,MAAM,QAAQ;IACZ;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,UAAU;IACZ;CACD;AAED,MAAM,YAAY;IAChB;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,WAAW;IACb;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,WAAW;IACb;CACD;AAED,MAAM,WAAW;IACf;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;IACA;QACE,aAAa,SAAS,CAAC,EAAE,CAAC,EAAE;QAC5B,QAAQ;QACR,QAAQ;QACR,MAAM;IACR;CACD;AAED,MAAM,UAAU;IACd;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;IAC9B;QAAE,OAAO;QAAO,SAAS;IAAK;CAC/B","debugId":null}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/lib/learn-data.ts"],"sourcesContent":["import { \n  Course, \n  Lesson, \n  LearningPath, \n  UserLearningProgress, \n  LearningRecommendation, \n  UserLearningProfile,\n  LearningActivity,\n  CourseProgress,\n  LearningStats,\n  Achievement,\n  QuizQuestion\n} from './learn-definitions';\n\n// 模拟用户数据存储（实际项目中应该使用数据库）\nlet userProgress: Record<string, UserLearningProgress> = {};\nlet userProfiles: Record<string, UserLearningProfile> = {};\nlet learningActivities: LearningActivity[] = [];\n\n// 获取用户学习进度\nexport async function getUserLearningProgress(userId: string): Promise<UserLearningProgress> {\n  if (!userProgress[userId]) {\n    // 初始化用户进度\n    userProgress[userId] = {\n      user_id: userId,\n      course_progress: [],\n      overall_stats: {\n        total_courses_completed: 0,\n        total_lessons_completed: 0,\n        total_study_time_hours: 0,\n        average_score: 0,\n        current_streak: 0,\n        longest_streak: 0\n      },\n      achievements: [],\n      learning_streak: 0,\n      last_study_date: new Date()\n    };\n  }\n  return userProgress[userId];\n}\n\n// 更新课程进度\nexport async function updateCourseProgress(\n  userId: string, \n  courseId: string, \n  lessonId: string,\n  score: number,\n  timeSpent: number\n): Promise<void> {\n  const progress = await getUserLearningProgress(userId);\n  let courseProgress = progress.course_progress.find(cp => cp.course_id === courseId);\n  \n  if (!courseProgress) {\n    courseProgress = {\n      course_id: courseId,\n      completed_lessons: [],\n      total_score: 0,\n      time_spent_minutes: 0,\n      completion_percentage: 0,\n      last_accessed: new Date(),\n      is_completed: false,\n      certificate_earned: false\n    };\n    progress.course_progress.push(courseProgress);\n  }\n  \n  if (!courseProgress.completed_lessons.includes(lessonId)) {\n    courseProgress.completed_lessons.push(lessonId);\n  }\n  \n  courseProgress.total_score += score;\n  courseProgress.time_spent_minutes += timeSpent;\n  courseProgress.last_accessed = new Date();\n  \n  // 更新完成百分比\n  const course = await getCourseById(courseId);\n  if (course) {\n    courseProgress.completion_percentage = (courseProgress.completed_lessons.length / course.lessons_count) * 100;\n    courseProgress.is_completed = courseProgress.completion_percentage >= 100;\n    \n    if (courseProgress.is_completed && !courseProgress.certificate_earned) {\n      courseProgress.certificate_earned = true;\n      // 添加完成成就\n      await addAchievement(userId, {\n        id: `course_complete_${courseId}`,\n        title: `完成课程：${course.title}`,\n        description: '恭喜完成整个课程！',\n        icon_url: '/achievements/course-complete.png',\n        earned_date: new Date(),\n        rarity: 'rare',\n        category: 'completion'\n      });\n    }\n  }\n  \n  // 更新总体统计\n  updateOverallStats(progress);\n  \n  // 记录学习活动\n  await recordLearningActivity(userId, courseId, lessonId, 'lesson_completed', score, timeSpent);\n}\n\n// 智能学习推荐算法\nexport async function getLearningRecommendations(userId: string): Promise<LearningRecommendation[]> {\n  const progress = await getUserLearningProgress(userId);\n  const userProfile = await getUserLearningProfile(userId);\n  const allCourses = await getAllCourses();\n  \n  const recommendations: LearningRecommendation[] = [];\n  \n  // 1. 继续学习推荐\n  const inProgressCourse = progress.course_progress.find(cp => \n    cp.completion_percentage > 0 && cp.completion_percentage < 100\n  );\n  \n  if (inProgressCourse) {\n    recommendations.push({\n      course_id: inProgressCourse.course_id,\n      score: 95, // 最高优先级\n      reason: '继续你的学习进度',\n      type: 'continue'\n    });\n  }\n  \n  // 2. 下一级别推荐\n  const completedCourses = progress.course_progress\n    .filter(cp => cp.is_completed)\n    .map(cp => cp.course_id);\n  \n  for (const completedCourseId of completedCourses) {\n    const completedCourse = allCourses.find(c => c.id === completedCourseId);\n    if (completedCourse) {\n      // 推荐同一级别的相关课程\n      const relatedCourses = allCourses.filter(c => \n        c.id !== completedCourseId &&\n        !completedCourses.includes(c.id) &&\n        c.level === completedCourse.level &&\n        c.tags.some(tag => completedCourse.tags.includes(tag))\n      );\n      \n      relatedCourses.forEach(course => {\n        recommendations.push({\n          course_id: course.id,\n          score: calculateRecommendationScore(course, userProfile, progress),\n          reason: `基于你完成的《${completedCourse.title}》`,\n          type: 'related'\n        });\n      });\n      \n      // 推荐下一级别的课程\n      const nextLevel = getNextLevel(completedCourse.level);\n      if (nextLevel) {\n        const nextLevelCourses = allCourses.filter(c => \n          !completedCourses.includes(c.id) &&\n          c.level === nextLevel &&\n          (c.prerequisites.length === 0 || c.prerequisites.some(prereq => completedCourses.includes(prereq)))\n        );\n        \n        nextLevelCourses.forEach(course => {\n          recommendations.push({\n            course_id: course.id,\n            score: calculateRecommendationScore(course, userProfile, progress) + 10, // 稍高分数\n            reason: `进阶学习：${nextLevel}级别`,\n            type: 'next_level'\n          });\n        });\n      }\n    }\n  }\n  \n  // 3. 热门课程推荐\n  const trendingCourses = await getTrendingCourses();\n  trendingCourses.forEach(course => {\n    if (!completedCourses.includes(course.id)) {\n      recommendations.push({\n        course_id: course.id,\n        score: calculateRecommendationScore(course, userProfile, progress) + 5,\n        reason: '热门课程',\n        type: 'trending'\n      });\n    }\n  });\n  \n  // 去重并按分数排序\n  const uniqueRecommendations = recommendations.reduce((acc, rec) => {\n    const existing = acc.find(r => r.course_id === rec.course_id);\n    if (!existing || existing.score < rec.score) {\n      return [...acc.filter(r => r.course_id !== rec.course_id), rec];\n    }\n    return acc;\n  }, [] as LearningRecommendation[]);\n  \n  return uniqueRecommendations\n    .sort((a, b) => b.score - a.score)\n    .slice(0, 6); // 返回前6个推荐\n}\n\n// 计算推荐分数\nfunction calculateRecommendationScore(\n  course: Course, \n  userProfile: UserLearningProfile, \n  progress: UserLearningProgress\n): number {\n  let score = 50; // 基础分数\n  \n  // 难度匹配度\n  const difficultyMatch = 10 - Math.abs(course.difficulty_score - userProfile.preferred_difficulty);\n  score += difficultyMatch * 2;\n  \n  // 主题匹配度\n  const topicMatches = course.tags.filter(tag => \n    userProfile.preferred_topics.includes(tag)\n  ).length;\n  score += topicMatches * 5;\n  \n  // 学习风格匹配\n  if (userProfile.learning_style === 'interactive' && course.level === 'Beginner') {\n    score += 10;\n  }\n  \n  // 完成率考虑\n  const courseProgress = progress.course_progress.find(cp => cp.course_id === course.id);\n  if (courseProgress) {\n    if (courseProgress.is_completed) {\n      score = 0; // 已完成的不推荐\n    } else {\n      score += 20; // 已开始但未完成的增加分数\n    }\n  }\n  \n  return Math.min(100, Math.max(0, score));\n}\n\n// 获取下一级别\nfunction getNextLevel(currentLevel: string): string | null {\n  switch (currentLevel) {\n    case 'Beginner': return 'Intermediate';\n    case 'Intermediate': return 'Advanced';\n    default: return null;\n  }\n}\n\n// 获取用户学习档案\nexport async function getUserLearningProfile(userId: string): Promise<UserLearningProfile> {\n  if (!userProfiles[userId]) {\n    // 默认档案\n    userProfiles[userId] = {\n      user_id: userId,\n      preferred_difficulty: 5,\n      preferred_topics: ['programming', 'web development'],\n      learning_style: 'interactive',\n      weekly_goal_hours: 10,\n      study_time_preference: 'flexible'\n    };\n  }\n  return userProfiles[userId];\n}\n\n// 更新学习档案\nexport async function updateUserLearningProfile(\n  userId: string, \n  profile: Partial<UserLearningProfile>\n): Promise<void> {\n  const currentProfile = await getUserLearningProfile(userId);\n  userProfiles[userId] = { ...currentProfile, ...profile };\n}\n\n// 记录学习活动\nexport async function recordLearningActivity(\n  userId: string,\n  courseId: string,\n  lessonId: string | undefined,\n  activityType: LearningActivity['activity_type'],\n  score?: number,\n  timeSpent?: number\n): Promise<void> {\n  const activity: LearningActivity = {\n    id: `${userId}_${Date.now()}`,\n    user_id: userId,\n    course_id: courseId,\n    lesson_id: lessonId,\n    activity_type: activityType,\n    timestamp: new Date(),\n    score,\n    time_spent: timeSpent\n  };\n  \n  learningActivities.push(activity);\n  \n  // 更新学习连击\n  await updateLearningStreak(userId);\n}\n\n// 更新学习连击\nasync function updateLearningStreak(userId: string): Promise<void> {\n  const progress = await getUserLearningProgress(userId);\n  const today = new Date();\n  const lastStudy = new Date(progress.last_study_date);\n  \n  const daysDiff = Math.floor((today.getTime() - lastStudy.getTime()) / (1000 * 60 * 60 * 24));\n  \n  if (daysDiff === 1) {\n    // 连续学习\n    progress.learning_streak += 1;\n    progress.overall_stats.current_streak += 1;\n    progress.overall_stats.longest_streak = Math.max(\n      progress.overall_stats.longest_streak,\n      progress.overall_stats.current_streak\n    );\n  } else if (daysDiff > 1) {\n    // 中断，重置连击\n    progress.learning_streak = 1;\n    progress.overall_stats.current_streak = 1;\n  }\n  \n  progress.last_study_date = today;\n  \n  // 检查连击成就\n  if (progress.learning_streak === 7) {\n    await addAchievement(userId, {\n      id: 'streak_7',\n      title: '学习达人',\n      description: '连续学习7天！',\n      icon_url: '/achievements/streak-7.png',\n      earned_date: new Date(),\n      rarity: 'rare',\n      category: 'streak'\n    });\n  }\n}\n\n// 添加成就\nasync function addAchievement(userId: string, achievement: Achievement): Promise<void> {\n  const progress = await getUserLearningProgress(userId);\n  const existing = progress.achievements.find(a => a.id === achievement.id);\n  \n  if (!existing) {\n    progress.achievements.push(achievement);\n  }\n}\n\n// 更新总体统计\nfunction updateOverallStats(progress: UserLearningProgress): void {\n  const stats = progress.overall_stats;\n  \n  stats.total_courses_completed = progress.course_progress.filter(cp => cp.is_completed).length;\n  stats.total_lessons_completed = progress.course_progress.reduce((total, cp) => \n    total + cp.completed_lessons.length, 0\n  );\n  stats.total_study_time_hours = progress.course_progress.reduce((total, cp) => \n    total + (cp.time_spent_minutes / 60), 0\n  );\n  \n  // 计算平均分\n  const totalScore = progress.course_progress.reduce((total, cp) => total + cp.total_score, 0);\n  const totalLessons = progress.course_progress.reduce((total, cp) => \n    total + cp.completed_lessons.length, 0\n  );\n  stats.average_score = totalLessons > 0 ? totalScore / totalLessons : 0;\n}\n\n// 模拟数据获取函数（实际项目中应该连接真实数据库）\nasync function getAllCourses(): Promise<Course[]> {\n  // 这里应该从数据库获取，现在返回模拟数据\n  return [\n    {\n      id: 'course_1',\n      title: 'React 基础教程',\n      level: 'Beginner',\n      description: '学习 React 基础知识',\n      cover_url: 'https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=React+programming+course+cover+modern+colorful+design&image_size=landscape_4_3',\n      lessons_count: 10,\n      prerequisites: [],\n      tags: ['react', 'javascript', 'frontend'],\n      estimated_hours: 15,\n      difficulty_score: 3\n    },\n    {\n      id: 'course_2',\n      title: 'Next.js 进阶',\n      level: 'Intermediate',\n      description: '深入学习 Next.js 框架',\n      cover_url: 'https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Next.js+advanced+course+cover+sleek+modern+design&image_size=landscape_4_3',\n      lessons_count: 12,\n      prerequisites: ['course_1'],\n      tags: ['nextjs', 'react', 'fullstack'],\n      estimated_hours: 20,\n      difficulty_score: 6\n    },\n    {\n      id: 'course_3',\n      title: 'TypeScript 实战',\n      level: 'Advanced',\n      description: 'TypeScript 高级特性和最佳实践',\n      cover_url: 'https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=TypeScript+advanced+course+cover+professional+design&image_size=landscape_4_3',\n      lessons_count: 15,\n      prerequisites: ['course_1', 'course_2'],\n      tags: ['typescript', 'javascript', 'type-safety'],\n      estimated_hours: 25,\n      difficulty_score: 8\n    }\n  ];\n}\n\nasync function getCourseById(courseId: string): Promise<Course | undefined> {\n  const courses = await getAllCourses();\n  return courses.find(c => c.id === courseId);\n}\n\nasync function getTrendingCourses(): Promise<Course[]> {\n  const courses = await getAllCourses();\n  // 模拟热门课程（基于最近活动）\n  const recentActivities = learningActivities.filter(\n    activity => activity.timestamp > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\n  );\n  \n  const coursePopularity = new Map<string, number>();\n  recentActivities.forEach(activity => {\n    const count = coursePopularity.get(activity.course_id) || 0;\n    coursePopularity.set(activity.course_id, count + 1);\n  });\n  \n  return courses\n    .filter(course => coursePopularity.has(course.id))\n    .sort((a, b) => (coursePopularity.get(b.id) || 0) - (coursePopularity.get(a.id) || 0))\n    .slice(0, 3);\n}\n\n// 获取学习统计\nexport async function getLearningStats(userId: string): Promise<LearningStats> {\n  const progress = await getUserLearningProgress(userId);\n  return progress.overall_stats;\n}\n\n// 获取用户成就\nexport async function getUserAchievements(userId: string): Promise<Achievement[]> {\n  const progress = await getUserLearningProgress(userId);\n  return progress.achievements.sort((a, b) => \n    b.earned_date.getTime() - a.earned_date.getTime()\n  );\n}\n\n// 英语课程数据（用于传统课程页面）\nconst englishCourses: Course[] = [\n  {\n    id: 'course-a1',\n    title: 'English Foundations A1',\n    level: 'Beginner',\n    description:\n      'Master the basics: phonetics, greetings, numbers, simple sentences.',\n    cover_url: '/opengraph-image.png',\n    lessons_count: 8,\n    prerequisites: [],\n    tags: ['english', 'beginner', 'foundation'],\n    estimated_hours: 20,\n    difficulty_score: 2\n  },\n  {\n    id: 'course-b1',\n    title: 'English Conversation B1',\n    level: 'Intermediate',\n    description:\n      'Develop everyday conversation skills and listening comprehension.',\n    cover_url: '/hero-mobile.png',\n    lessons_count: 12,\n    prerequisites: ['course-a1'],\n    tags: ['english', 'conversation', 'intermediate'],\n    estimated_hours: 30,\n    difficulty_score: 5\n  },\n  {\n    id: 'course-c1',\n    title: 'Academic English C1',\n    level: 'Advanced',\n    description:\n      'Focus on academic writing, presentations, and critical reading.',\n    cover_url: '/hero-desktop.png',\n    lessons_count: 10,\n    prerequisites: ['course-b1'],\n    tags: ['english', 'academic', 'advanced'],\n    estimated_hours: 25,\n    difficulty_score: 8\n  },\n];\n\nconst englishLessons: Lesson[] = [\n  {\n    id: 'lesson-a1-01',\n    course_id: 'course-a1',\n    title: 'Alphabet & Sounds',\n    objective: 'Recognize basic English letters and common sounds.',\n    content:\n      'Introduction to English alphabet.\\nPractice phonetics.\\nCommon vowel sounds.',\n    duration_min: 20,\n    order_index: 1,\n  },\n  {\n    id: 'lesson-a1-02',\n    course_id: 'course-a1',\n    title: 'Greetings & Introductions',\n    objective: 'Use greetings and introduce yourself.',\n    content:\n      'Hi, Hello, Good morning.\\nHow to introduce yourself with simple sentences.',\n    duration_min: 25,\n    order_index: 2,\n  },\n  {\n    id: 'lesson-b1-01',\n    course_id: 'course-b1',\n    title: 'Small Talk Basics',\n    objective: 'Engage in small talk about weather, hobbies, and news.',\n    content:\n      'Small talk starters.\\nPolite responses and follow-up questions.\\nRole-play examples.',\n    duration_min: 30,\n    order_index: 1,\n  },\n];\n\nconst englishQuiz: QuizQuestion[] = [\n  {\n    id: 'q-a1-02-1',\n    lesson_id: 'lesson-a1-02',\n    prompt: 'Choose the correct greeting for morning.',\n    choices: [\n      { id: 'c1', text: 'Good morning', correct: true },\n      { id: 'c2', text: 'Good night', correct: false },\n      { id: 'c3', text: 'See you', correct: false },\n    ],\n  },\n];\n\n// 英语课程相关函数（用于传统课程页面）\nexport async function fetchCourses(query = ''): Promise<Course[]> {\n  const q = query.trim().toLowerCase();\n  return englishCourses\n    .filter((c) => {\n      if (!q) return true;\n      return (\n        c.title.toLowerCase().includes(q) ||\n        c.level.toLowerCase().includes(q) ||\n        c.description.toLowerCase().includes(q)\n      );\n    })\n    .sort((a, b) => a.title.localeCompare(b.title));\n}\n\nexport async function fetchCourseById(id: string): Promise<Course | undefined> {\n  return englishCourses.find((c) => c.id === id);\n}\n\nexport async function fetchLessonsByCourseId(\n  courseId: string,\n): Promise<Lesson[]> {\n  return englishLessons.filter((l) => l.course_id === courseId);\n}\n\nexport async function fetchLessonById(id: string): Promise<Lesson | undefined> {\n  return englishLessons.find((l) => l.id === id);\n}\n\nexport async function fetchQuizByLessonId(\n  lessonId: string,\n): Promise<QuizQuestion[]> {\n  return englishQuiz.filter((q) => q.lesson_id === lessonId);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 780, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/seed/route.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\nimport postgres from 'postgres';\nimport { invoices, customers, revenue, users } from '../lib/placeholder-data';\nimport {\n  fetchCourses,\n  fetchLessonsByCourseId,\n  fetchQuizByLessonId,\n} from '../lib/learn-data';\n\nexport const runtime = 'nodejs';\n\nconst sql = postgres(process.env.POSTGRES_URL!, {\n  ssl: process.env.POSTGRES_SSL === 'require' ? 'require' : undefined,\n});\n\nasync function seedUsers() {\n  await sql`CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\"`;\n  await sql`\n    CREATE TABLE IF NOT EXISTS users (\n      id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\n      name VARCHAR(255) NOT NULL,\n      email TEXT NOT NULL UNIQUE,\n      password TEXT NOT NULL,\n      is_vip BOOLEAN NOT NULL DEFAULT FALSE,\n      created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n    );\n  `;\n  await sql`ALTER TABLE users ADD COLUMN IF NOT EXISTS is_vip BOOLEAN NOT NULL DEFAULT FALSE`;\n  await sql`ALTER TABLE users ADD COLUMN IF NOT EXISTS created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()`;\n\n  const insertedUsers = await Promise.all(\n    users.map(async (user) => {\n      const hashedPassword = await bcrypt.hash(user.password, 10);\n      return sql`\n        INSERT INTO users (id, name, email, password, is_vip)\n        VALUES (${user.id}, ${user.name}, ${user.email}, ${hashedPassword}, ${false})\n        ON CONFLICT (id) DO NOTHING;\n      `;\n    }),\n  );\n\n  // 人员信息表（可选）\n  await sql`\n    CREATE TABLE IF NOT EXISTS profiles (\n      user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,\n      avatar_url TEXT,\n      phone TEXT,\n      bio TEXT\n    );\n  `;\n\n  return insertedUsers;\n}\n\n// 角色与权限相关\nasync function seedRoles() {\n  await sql`\n    CREATE TABLE IF NOT EXISTS roles (\n      id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\n      name TEXT NOT NULL UNIQUE\n    );\n  `;\n  await Promise.all([\n    sql`INSERT INTO roles (name) VALUES ('user') ON CONFLICT (name) DO NOTHING`,\n    sql`INSERT INTO roles (name) VALUES ('vip') ON CONFLICT (name) DO NOTHING`,\n    sql`INSERT INTO roles (name) VALUES ('admin') ON CONFLICT (name) DO NOTHING`,\n  ]);\n}\n\nasync function seedPermissions() {\n  await sql`\n    CREATE TABLE IF NOT EXISTS permissions (\n      id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\n      name TEXT NOT NULL UNIQUE,\n      description TEXT\n    );\n  `;\n  const inserts = [\n    ['view_courses', '查看课程'],\n    ['access_vip_content', '访问 VIP 内容'],\n    ['view_dashboard', '查看后台仪表盘'],\n    ['edit_customers', '编辑客户'],\n    ['edit_invoices', '编辑账单'],\n    ['manage_users', '管理用户与权限'],\n  ];\n  await Promise.all(\n    inserts.map(([name, desc]) =>\n      sql`INSERT INTO permissions (name, description) VALUES (${name}, ${desc}) ON CONFLICT (name) DO NOTHING`,\n    ),\n  );\n}\n\nasync function seedRolePermissionMappings() {\n  await sql`\n    CREATE TABLE IF NOT EXISTS role_permissions (\n      role_id UUID REFERENCES roles(id) ON DELETE CASCADE,\n      permission_id UUID REFERENCES permissions(id) ON DELETE CASCADE,\n      PRIMARY KEY (role_id, permission_id)\n    );\n  `;\n\n  // 简化：通过子查询按名称映射\n  const map = async (role: string, perm: string) =>\n    sql`\n      INSERT INTO role_permissions (role_id, permission_id)\n      VALUES (\n        (SELECT id FROM roles WHERE name=${role}),\n        (SELECT id FROM permissions WHERE name=${perm})\n      )\n      ON CONFLICT DO NOTHING\n    `;\n\n  // user\n  await map('user', 'view_courses');\n\n  // vip\n  await map('vip', 'view_courses');\n  await map('vip', 'access_vip_content');\n\n  // admin\n  await map('admin', 'view_courses');\n  await map('admin', 'access_vip_content');\n  await map('admin', 'view_dashboard');\n  await map('admin', 'edit_customers');\n  await map('admin', 'edit_invoices');\n  await map('admin', 'manage_users');\n}\n\nasync function seedUserRoles() {\n  await sql`\n    CREATE TABLE IF NOT EXISTS user_roles (\n      user_id UUID REFERENCES users(id) ON DELETE CASCADE,\n      role_id UUID REFERENCES roles(id) ON DELETE CASCADE,\n      PRIMARY KEY (user_id, role_id)\n    );\n  `;\n\n  // 默认将占位用户分配为普通 user 角色\n  await sql`\n    INSERT INTO user_roles (user_id, role_id)\n    VALUES (\n      ${users[0].id},\n      (SELECT id FROM roles WHERE name='user')\n    )\n    ON CONFLICT DO NOTHING\n  `;\n}\n\nasync function seedInvoices() {\n  await sql`CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\"`;\n\n  await sql`\n    CREATE TABLE IF NOT EXISTS invoices (\n      id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\n      customer_id UUID NOT NULL,\n      amount INT NOT NULL,\n      status VARCHAR(255) NOT NULL,\n      date DATE NOT NULL\n    );\n  `;\n\n  const insertedInvoices = await Promise.all(\n    invoices.map(\n      (invoice) => sql`\n        INSERT INTO invoices (customer_id, amount, status, date)\n        VALUES (${invoice.customer_id}, ${invoice.amount}, ${invoice.status}, ${invoice.date})\n        ON CONFLICT (id) DO NOTHING;\n      `,\n    ),\n  );\n\n  return insertedInvoices;\n}\n\nasync function seedCustomers() {\n  await sql`CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\"`;\n\n  await sql`\n    CREATE TABLE IF NOT EXISTS customers (\n      id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,\n      name VARCHAR(255) NOT NULL,\n      email VARCHAR(255) NOT NULL,\n      image_url VARCHAR(255) NOT NULL\n    );\n  `;\n\n  const insertedCustomers = await Promise.all(\n    customers.map(\n      (customer) => sql`\n        INSERT INTO customers (id, name, email, image_url)\n        VALUES (${customer.id}, ${customer.name}, ${customer.email}, ${customer.image_url})\n        ON CONFLICT (id) DO NOTHING;\n      `,\n    ),\n  );\n\n  return insertedCustomers;\n}\n\nasync function seedRevenue() {\n  await sql`\n    CREATE TABLE IF NOT EXISTS revenue (\n      month VARCHAR(4) NOT NULL UNIQUE,\n      revenue INT NOT NULL\n    );\n  `;\n\n  const insertedRevenue = await Promise.all(\n    revenue.map(\n      (rev) => sql`\n        INSERT INTO revenue (month, revenue)\n        VALUES (${rev.month}, ${rev.revenue})\n        ON CONFLICT (month) DO NOTHING;\n      `,\n    ),\n  );\n\n  return insertedRevenue;\n}\n\n// 学习业务相关数据表与示例数据\nasync function seedLearningSchema() {\n  await sql`CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\"`;\n\n  // 课程表\n  await sql`\n    CREATE TABLE IF NOT EXISTS courses (\n      id TEXT PRIMARY KEY,\n      title TEXT NOT NULL,\n      level TEXT NOT NULL,\n      description TEXT NOT NULL,\n      cover_url TEXT,\n      lessons_count INT NOT NULL,\n      estimated_hours INT NOT NULL,\n      difficulty_score INT NOT NULL,\n      tags TEXT[] DEFAULT '{}',\n      created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n    );\n  `;\n\n  // 课时表\n  await sql`\n    CREATE TABLE IF NOT EXISTS lessons (\n      id TEXT PRIMARY KEY,\n      course_id TEXT NOT NULL REFERENCES courses(id) ON DELETE CASCADE,\n      title TEXT NOT NULL,\n      objective TEXT,\n      content TEXT,\n      duration_min INT NOT NULL,\n      order_index INT NOT NULL,\n      created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n    );\n  `;\n\n  // 测验题目表（选择题集合以 JSONB 存储）\n  await sql`\n    CREATE TABLE IF NOT EXISTS quiz_questions (\n      id TEXT PRIMARY KEY,\n      lesson_id TEXT NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,\n      prompt TEXT NOT NULL,\n      choices JSONB NOT NULL,\n      created_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n    );\n  `;\n\n  // 用户学习档案\n  await sql`\n    CREATE TABLE IF NOT EXISTS user_learning_profiles (\n      user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,\n      preferred_difficulty INT,\n      preferred_topics TEXT[] DEFAULT '{}',\n      learning_style TEXT,\n      weekly_goal_hours INT,\n      study_time_preference TEXT,\n      updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n    );\n  `;\n\n  // 用户课程进度\n  await sql`\n    CREATE TABLE IF NOT EXISTS user_course_progress (\n      user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n      course_id TEXT NOT NULL REFERENCES courses(id) ON DELETE CASCADE,\n      completed_lessons TEXT[] DEFAULT '{}',\n      total_score INT DEFAULT 0,\n      time_spent_minutes INT DEFAULT 0,\n      completion_percentage REAL DEFAULT 0,\n      last_accessed TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n      is_completed BOOLEAN NOT NULL DEFAULT FALSE,\n      certificate_earned BOOLEAN NOT NULL DEFAULT FALSE,\n      PRIMARY KEY (user_id, course_id)\n    );\n  `;\n\n  // 用户成就\n  await sql`\n    CREATE TABLE IF NOT EXISTS achievements (\n      id TEXT PRIMARY KEY,\n      user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n      title TEXT NOT NULL,\n      description TEXT,\n      icon_url TEXT,\n      earned_date TIMESTAMPTZ NOT NULL,\n      category TEXT\n    );\n  `;\n\n  // 学习活动日志\n  await sql`\n    CREATE TABLE IF NOT EXISTS learning_activities (\n      id TEXT PRIMARY KEY,\n      user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,\n      course_id TEXT NOT NULL REFERENCES courses(id) ON DELETE CASCADE,\n      lesson_id TEXT,\n      activity_type TEXT NOT NULL,\n      timestamp TIMESTAMPTZ NOT NULL,\n      score INT,\n      time_spent INT\n    );\n  `;\n}\n\nasync function seedLearningData() {\n  // 课程与课时、测验\n  const courses = await fetchCourses('');\n  for (const c of courses) {\n    await sql`\n      INSERT INTO courses (id, title, level, description, cover_url, lessons_count, estimated_hours, difficulty_score, tags)\n      VALUES (${c.id}, ${c.title}, ${c.level}, ${c.description}, ${c.cover_url}, ${c.lessons_count}, ${c.estimated_hours}, ${c.difficulty_score}, ${sql.array(c.tags)})\n      ON CONFLICT (id) DO NOTHING;\n    `;\n    const lessons = await fetchLessonsByCourseId(c.id);\n    for (const l of lessons) {\n      await sql`\n        INSERT INTO lessons (id, course_id, title, objective, content, duration_min, order_index)\n        VALUES (${l.id}, ${l.course_id}, ${l.title}, ${l.objective}, ${l.content}, ${l.duration_min}, ${l.order_index})\n        ON CONFLICT (id) DO NOTHING;\n      `;\n      const quiz = await fetchQuizByLessonId(l.id);\n      for (const q of quiz) {\n        await sql`\n          INSERT INTO quiz_questions (id, lesson_id, prompt, choices)\n          VALUES (${q.id}, ${q.lesson_id}, ${q.prompt}, ${sql.json(q.choices)})\n          ON CONFLICT (id) DO NOTHING;\n        `;\n      }\n    }\n  }\n\n  // 用户学习档案（为占位用户初始化）\n  const defaultUserId = users[0]?.id;\n  if (defaultUserId) {\n    await sql`\n      INSERT INTO user_learning_profiles (user_id, preferred_difficulty, preferred_topics, learning_style, weekly_goal_hours, study_time_preference)\n      VALUES (${defaultUserId}, ${5}, ${sql.array(['programming', 'web development'])}, ${'interactive'}, ${10}, ${'flexible'})\n      ON CONFLICT (user_id) DO NOTHING;\n    `;\n  }\n}\n\nexport async function GET() {\n  try {\n    const result = await sql.begin((sql) => [\n      seedUsers(),\n      seedRoles(),\n      seedPermissions(),\n      seedRolePermissionMappings(),\n      seedUserRoles(),\n      seedCustomers(),\n      seedInvoices(),\n      seedRevenue(),\n      seedLearningSchema(),\n      seedLearningData(),\n    ]);\n\n    return Response.json({ message: 'Database seeded successfully' });\n  } catch (error) {\n    return Response.json({ error }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}