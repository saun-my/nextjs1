{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/dashboard/FundLiveTable.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { ArrowPathIcon, ArrowTrendingUpIcon, ArrowTrendingDownIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\n\ntype FundItem = {\n  code: string;\n  name: string;\n  net: number | null;\n  dayGrowth: number;\n  lastUpdate: string | null;\n  type: string;\n};\n\nexport default function FundLiveTable() {\n  const [list, setList] = useState<FundItem[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [source, setSource] = useState<string>('');\n  const [sort, setSort] = useState<'growth' | 'code'>('growth');\n  const router = useRouter();\n\n  async function load() {\n    try {\n      setLoading(true);\n      setError(null);\n      const res = await fetch('/api/funds/list', { cache: 'no-store' });\n      const data = await res.json();\n      setSource(typeof data.source === 'string' ? data.source : '');\n      setList(Array.isArray(data.list) ? data.list : []);\n    } catch (e: any) {\n      setError(e?.message || '加载失败');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    load();\n    const id = setInterval(load, 30000);\n    return () => clearInterval(id);\n  }, []);\n\n  const sorted = useMemo(() => {\n    const arr = [...list];\n    if (sort === 'growth') arr.sort((a, b) => Number(b.dayGrowth) - Number(a.dayGrowth));\n    if (sort === 'code') arr.sort((a, b) => a.code.localeCompare(b.code));\n    return arr;\n  }, [list, sort]);\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <div className=\"flex items-center justify-between px-6 py-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"text-lg font-semibold\">今日热门基金</div>\n          {source && (\n            <span className=\"px-2 py-0.5 rounded-full text-xs bg-blue-50 text-blue-700 border border-blue-200\">{source}</span>\n          )}\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"inline-flex rounded-md border bg-white\">\n            <button\n              onClick={() => setSort('growth')}\n              className={`px-3 py-1 text-xs ${sort==='growth'?'bg-blue-600 text-white':'text-gray-700'} rounded-l-md`}\n            >涨跌</button>\n            <button\n              onClick={() => setSort('code')}\n              className={`px-3 py-1 text-xs ${sort==='code'?'bg-blue-600 text-white':'text-gray-700'} rounded-r-md`}\n            >代码</button>\n          </div>\n          <button onClick={load} className=\"inline-flex items-center gap-1 px-3 py-1 text-sm rounded bg-blue-600 text-white\">\n            <ArrowPathIcon className={`w-4 h-4 ${loading?'animate-spin':''}`} /> 刷新\n          </button>\n        </div>\n      </div>\n      {error && (\n        <div className=\"px-6 pb-2 text-sm text-red-600\">{error}</div>\n      )}\n      <table className=\"min-w-full\">\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">代码</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">名称</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">日涨跌</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">净值</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">更新时间</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">详情</th>\n          </tr>\n        </thead>\n        <tbody>\n          {sorted.map((f) => (\n            <tr\n              key={f.code}\n              className=\"group border-t hover:bg-gray-50 transition-colors cursor-pointer\"\n              onClick={() => router.push(`/funds/${f.code}?name=${encodeURIComponent(f.name)}`)}\n            >\n              <td className=\"px-6 py-3 font-mono text-sm\">{f.code}</td>\n              <td className=\"px-6 py-3\">{f.name}</td>\n              <td className=\"px-6 py-3\">\n                <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs ${Number(f.dayGrowth)>=0?'bg-green-50 text-green-700 border border-green-200':'bg-red-50 text-red-700 border border-red-200'}`}>\n                  {Number(f.dayGrowth) >= 0 ? <ArrowTrendingUpIcon className=\"w-3 h-3\"/> : <ArrowTrendingDownIcon className=\"w-3 h-3\"/>}\n                  {Number(f.dayGrowth).toFixed(2)}%\n                </span>\n              </td>\n              <td className=\"px-6 py-3\">{f.net ?? '-'}</td>\n              <td className=\"px-6 py-3 text-xs text-gray-500\">{f.lastUpdate ?? '-'}</td>\n              <td className=\"px-6 py-3\">\n                <Link href={`/funds/${f.code}?name=${encodeURIComponent(f.name)}`} className=\"inline-flex items-center gap-1 px-2.5 py-1 text-xs rounded bg-gray-100 text-gray-700 hover:bg-blue-600 hover:text-white\">\n                  查看 <ArrowRightIcon className=\"w-3 h-3\" />\n                </Link>\n              </td>\n            </tr>\n          ))}\n          {sorted.length === 0 && !loading && (\n            <tr>\n              <td className=\"px-6 py-8 text-center text-gray-500\" colSpan={6}>暂无数据</td>\n            </tr>\n          )}\n          {loading && (\n            <>\n              {Array.from({ length: 5 }).map((_, i) => (\n                <tr key={`sk-${i}`} className=\"border-t animate-pulse\">\n                  <td className=\"px-6 py-3\"><div className=\"h-3 w-16 bg-gray-200 rounded\"/></td>\n                  <td className=\"px-6 py-3\"><div className=\"h-3 w-32 bg-gray-200 rounded\"/></td>\n                  <td className=\"px-6 py-3\"><div className=\"h-4 w-20 bg-gray-200 rounded\"/></td>\n                  <td className=\"px-6 py-3\"><div className=\"h-3 w-20 bg-gray-200 rounded\"/></td>\n                  <td className=\"px-6 py-3\"><div className=\"h-3 w-24 bg-gray-200 rounded\"/></td>\n                  <td className=\"px-6 py-3\"><div className=\"h-3 w-12 bg-gray-200 rounded\"/></td>\n                </tr>\n              ))}\n            </>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/dashboard/FundSearchPanel.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { MagnifyingGlassIcon, ArrowTrendingUpIcon, ArrowTrendingDownIcon } from '@heroicons/react/24/outline';\n\ntype FundDetail = {\n  code: string;\n  name: string;\n  type: string;\n  netWorth: number | null;\n  netWorthDate: string | null;\n  dayGrowth: number;\n  lastMonthGrowth?: number;\n  lastThreeMonthsGrowth?: number;\n  lastYearGrowth?: number;\n};\n\nexport default function FundSearchPanel() {\n  const [code, setCode] = useState('');\n  const [detail, setDetail] = useState<FundDetail | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function search() {\n    if (!code.trim()) return;\n    try {\n      setLoading(true);\n      setError(null);\n      setDetail(null);\n      const res = await fetch(`/api/funds/${encodeURIComponent(code.trim())}`, { cache: 'no-store' });\n      const data = await res.json();\n      const info = Array.isArray(data?.data) ? data.data[0] : null;\n      if (!info) throw new Error('未找到基金信息');\n      setDetail({\n        code: info.code,\n        name: info.name,\n        type: info.type,\n        netWorth: info.netWorth ?? null,\n        netWorthDate: info.netWorthDate ?? null,\n        dayGrowth: Number(info.dayGrowth ?? 0),\n        lastMonthGrowth: info.lastMonthGrowth != null ? Number(info.lastMonthGrowth) : undefined,\n        lastThreeMonthsGrowth: info.lastThreeMonthsGrowth != null ? Number(info.lastThreeMonthsGrowth) : undefined,\n        lastYearGrowth: info.lastYearGrowth != null ? Number(info.lastYearGrowth) : undefined,\n      });\n    } catch (e: any) {\n      setError(e?.message || '查询失败');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div>\n      <div className=\"px-6 py-4 border-b flex items-center gap-3\">\n        <div className=\"text-lg font-semibold\">基金代码查询</div>\n        <div className=\"flex items-center gap-2 ml-auto\">\n          <div className=\"relative\">\n            <MagnifyingGlassIcon className=\"w-4 h-4 absolute left-2 top-2.5 text-gray-400\" />\n            <input\n              className=\"border rounded pl-7 pr-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"如 110022\"\n              value={code}\n              onChange={(e) => setCode(e.target.value)}\n            />\n          </div>\n          <button onClick={search} className=\"px-3 py-1.5 text-sm rounded bg-blue-600 text-white\">查询</button>\n        </div>\n      </div>\n      {detail && (\n        <div className=\"px-6 pt-3 text-sm text-gray-700\">\n          <span className=\"font-medium\">{detail.code}</span>\n          <span className=\"mx-2 text-gray-400\">·</span>\n          <span>{detail.name}</span>\n        </div>\n      )}\n      {error && <div className=\"px-6 pt-2 text-sm text-red-600\">{error}</div>}\n\n      {loading && (\n        <div className=\"px-6 py-8 text-center text-gray-500\">加载中...</div>\n      )}\n\n      {!loading && detail && (\n        <div className=\"px-6 py-5 grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"rounded-xl border p-4 bg-gradient-to-br from-blue-50 to-white\">\n            <div className=\"text-sm text-gray-500\">净值</div>\n            <div className=\"text-2xl font-bold text-gray-900 mt-1\">{detail.netWorth ?? '-'}</div>\n            <div className=\"text-xs text-gray-500 mt-1\">{detail.netWorthDate ?? '-'}</div>\n          </div>\n          <div className=\"rounded-xl border p-4 bg-gradient-to-br from-green-50 to-white\">\n            <div className=\"text-sm text-gray-500\">日涨跌</div>\n            <div className={`text-2xl font-bold mt-1 ${Number(detail.dayGrowth)>=0?'text-green-700':'text-red-600'} flex items-center gap-1`}>\n              {Number(detail.dayGrowth) >= 0 ? <ArrowTrendingUpIcon className=\"w-5 h-5\"/> : <ArrowTrendingDownIcon className=\"w-5 h-5\"/>}\n              {Number(detail.dayGrowth).toFixed(2)}%\n            </div>\n            <div className=\"text-xs text-gray-500 mt-1\">{detail.type || '-'}</div>\n          </div>\n          <div className=\"rounded-xl border p-4 bg-gradient-to-br from-indigo-50 to-white\">\n            <div className=\"text-sm text-gray-500\">区间涨跌</div>\n            <div className=\"mt-2 flex flex-wrap gap-2\">\n              <span className={`px-2 py-0.5 rounded-full text-xs ${Number(detail.lastMonthGrowth||0)>=0?'bg-green-50 text-green-700 border border-green-200':'bg-red-50 text-red-700 border border-red-200'}`}>近一月 {detail.lastMonthGrowth!=null?`${detail.lastMonthGrowth}%`:'-'}</span>\n              <span className={`px-2 py-0.5 rounded-full text-xs ${Number(detail.lastThreeMonthsGrowth||0)>=0?'bg-green-50 text-green-700 border border-green-200':'bg-red-50 text-red-700 border border-red-200'}`}>近三月 {detail.lastThreeMonthsGrowth!=null?`${detail.lastThreeMonthsGrowth}%`:'-'}</span>\n              <span className={`px-2 py-0.5 rounded-full text-xs ${Number(detail.lastYearGrowth||0)>=0?'bg-green-50 text-green-700 border border-green-200':'bg-red-50 text-red-700 border border-red-200'}`}>近一年 {detail.lastYearGrowth!=null?`${detail.lastYearGrowth}%`:'-'}</span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {!loading && detail && (\n        <div className=\"px-6 pb-5\">\n          <a href={`/funds/${detail.code}?name=${encodeURIComponent(detail.name)}`} className=\"inline-flex items-center gap-1 px-3 py-1.5 text-sm rounded bg-gray-100 text-gray-700 hover:bg-blue-600 hover:text-white\">查看详情</a>\n        </div>\n      )}\n\n      {!loading && !detail && (\n        <div className=\"px-6 py-8 text-center text-gray-500\">请输入基金代码查询</div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 804, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/dashboard/QuickAddInvestment.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\n\nexport default function QuickAddInvestment({ defaultUserId, defaultFundCode }: { defaultUserId?: string; defaultFundCode?: string }) {\n  const today = new Date().toISOString().slice(0,10);\n  const [open, setOpen] = useState(false);\n  const [form, setForm] = useState({ user_id: defaultUserId || '', fund_code: defaultFundCode || '', amount: '', price: '', trade_date: today, note: '', action: 'buy' });\n  const [status, setStatus] = useState('');\n  const [mode, setMode] = useState<'amount'|'shares'>('amount');\n\n  async function submit() {\n    setStatus('提交中...');\n    const body: any = { ...form };\n    const priceNum = Number(body.price);\n    if (mode === 'shares') {\n      const sharesNum = Number(body.amount);\n      body.amount = sharesNum * priceNum;\n    } else {\n      body.amount = Number(body.amount);\n    }\n    body.price = priceNum;\n    const res = await fetch('/api/investments', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(body) });\n    const data = await res.json();\n    setStatus(JSON.stringify(data));\n    if (res.ok) { setOpen(false); }\n  }\n\n  return (\n    <div>\n      <button onClick={()=>setOpen(true)} className=\"px-3 py-1.5 text-sm rounded bg-blue-600 text-white hover:bg-blue-700\">快速新增</button>\n      {open && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/20\">\n          <div className=\"bg-white w-full max-w-md rounded-lg border shadow-lg p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h3 className=\"text-lg font-semibold\">新增持有</h3>\n              <button onClick={()=>setOpen(false)} className=\"text-gray-500\">✕</button>\n            </div>\n            <div className=\"grid grid-cols-2 gap-2 mb-3\">\n              <input className=\"border p-2\" placeholder=\"用户ID\" value={form.user_id} onChange={e=>setForm({...form,user_id:e.target.value})} />\n              <input className=\"border p-2\" placeholder=\"基金代码\" value={form.fund_code} onChange={e=>setForm({...form,fund_code:e.target.value})} />\n              <input className=\"border p-2\" placeholder=\"份额/金额\" value={form.amount} onChange={e=>setForm({...form,amount:e.target.value})} />\n              <input className=\"border p-2\" placeholder=\"价格\" value={form.price} onChange={e=>setForm({...form,price:e.target.value})} />\n              <input className=\"border p-2\" type=\"date\" value={form.trade_date} onChange={e=>setForm({...form,trade_date:e.target.value})} />\n              <select className=\"border p-2\" value={form.action} onChange={e=>setForm({...form,action:e.target.value})}>\n                <option value=\"buy\">买入/加仓</option>\n                <option value=\"sell\">卖出/减仓</option>\n              </select>\n              <div className=\"col-span-2 flex items-center gap-2\">\n                <span className=\"text-sm text-gray-600\">录入模式</span>\n                <div className=\"flex bg-gray-100 rounded p-1\">\n                  <button className={`px-2 py-1 text-xs rounded ${mode==='amount'?'bg-white text-blue-600':'text-gray-700'}`} onClick={()=>setMode('amount')}>金额+价格</button>\n                  <button className={`px-2 py-1 text-xs rounded ${mode==='shares'?'bg-white text-blue-600':'text-gray-700'}`} onClick={()=>setMode('shares')}>份额+价格</button>\n                </div>\n              </div>\n              <input className=\"border p-2 col-span-2\" placeholder=\"备注\" value={form.note} onChange={e=>setForm({...form,note:e.target.value})} />\n            </div>\n            <div className=\"flex gap-2\">\n              <button onClick={submit} className=\"px-4 py-2 bg-blue-600 text-white rounded\">保存</button>\n              <button onClick={()=>setOpen(false)} className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded\">取消</button>\n            </div>\n            <div className=\"text-sm text-gray-600 mt-2\">{status}</div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}