{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/lib/learn-data.ts"],"sourcesContent":["import { \n  Course, \n  Lesson, \n  LearningPath, \n  UserLearningProgress, \n  LearningRecommendation, \n  UserLearningProfile,\n  LearningActivity,\n  CourseProgress,\n  LearningStats,\n  Achievement,\n  QuizQuestion\n} from './learn-definitions';\n\n// 模拟用户数据存储（实际项目中应该使用数据库）\nlet userProgress: Record<string, UserLearningProgress> = {};\nlet userProfiles: Record<string, UserLearningProfile> = {};\nlet learningActivities: LearningActivity[] = [];\n\n// 获取用户学习进度\nexport async function getUserLearningProgress(userId: string): Promise<UserLearningProgress> {\n  if (!userProgress[userId]) {\n    // 初始化用户进度\n    userProgress[userId] = {\n      user_id: userId,\n      course_progress: [],\n      overall_stats: {\n        total_courses_completed: 0,\n        total_lessons_completed: 0,\n        total_study_time_hours: 0,\n        average_score: 0,\n        current_streak: 0,\n        longest_streak: 0\n      },\n      achievements: [],\n      learning_streak: 0,\n      last_study_date: new Date()\n    };\n  }\n  return userProgress[userId];\n}\n\n// 更新课程进度\nexport async function updateCourseProgress(\n  userId: string, \n  courseId: string, \n  lessonId: string,\n  score: number,\n  timeSpent: number\n): Promise<void> {\n  const progress = await getUserLearningProgress(userId);\n  let courseProgress = progress.course_progress.find(cp => cp.course_id === courseId);\n  \n  if (!courseProgress) {\n    courseProgress = {\n      course_id: courseId,\n      completed_lessons: [],\n      total_score: 0,\n      time_spent_minutes: 0,\n      completion_percentage: 0,\n      last_accessed: new Date(),\n      is_completed: false,\n      certificate_earned: false\n    };\n    progress.course_progress.push(courseProgress);\n  }\n  \n  if (!courseProgress.completed_lessons.includes(lessonId)) {\n    courseProgress.completed_lessons.push(lessonId);\n  }\n  \n  courseProgress.total_score += score;\n  courseProgress.time_spent_minutes += timeSpent;\n  courseProgress.last_accessed = new Date();\n  \n  // 更新完成百分比\n  const course = await getCourseById(courseId);\n  if (course) {\n    courseProgress.completion_percentage = (courseProgress.completed_lessons.length / course.lessons_count) * 100;\n    courseProgress.is_completed = courseProgress.completion_percentage >= 100;\n    \n    if (courseProgress.is_completed && !courseProgress.certificate_earned) {\n      courseProgress.certificate_earned = true;\n      // 添加完成成就\n      await addAchievement(userId, {\n        id: `course_complete_${courseId}`,\n        title: `完成课程：${course.title}`,\n        description: '恭喜完成整个课程！',\n        icon_url: '/achievements/course-complete.png',\n        earned_date: new Date(),\n        rarity: 'rare',\n        category: 'completion'\n      });\n    }\n  }\n  \n  // 更新总体统计\n  updateOverallStats(progress);\n  \n  // 记录学习活动\n  await recordLearningActivity(userId, courseId, lessonId, 'lesson_completed', score, timeSpent);\n}\n\n// 智能学习推荐算法\nexport async function getLearningRecommendations(userId: string): Promise<LearningRecommendation[]> {\n  const progress = await getUserLearningProgress(userId);\n  const userProfile = await getUserLearningProfile(userId);\n  const allCourses = await getAllCourses();\n  \n  const recommendations: LearningRecommendation[] = [];\n  \n  // 1. 继续学习推荐\n  const inProgressCourse = progress.course_progress.find(cp => \n    cp.completion_percentage > 0 && cp.completion_percentage < 100\n  );\n  \n  if (inProgressCourse) {\n    recommendations.push({\n      course_id: inProgressCourse.course_id,\n      score: 95, // 最高优先级\n      reason: '继续你的学习进度',\n      type: 'continue'\n    });\n  }\n  \n  // 2. 下一级别推荐\n  const completedCourses = progress.course_progress\n    .filter(cp => cp.is_completed)\n    .map(cp => cp.course_id);\n  \n  for (const completedCourseId of completedCourses) {\n    const completedCourse = allCourses.find(c => c.id === completedCourseId);\n    if (completedCourse) {\n      // 推荐同一级别的相关课程\n      const relatedCourses = allCourses.filter(c => \n        c.id !== completedCourseId &&\n        !completedCourses.includes(c.id) &&\n        c.level === completedCourse.level &&\n        c.tags.some(tag => completedCourse.tags.includes(tag))\n      );\n      \n      relatedCourses.forEach(course => {\n        recommendations.push({\n          course_id: course.id,\n          score: calculateRecommendationScore(course, userProfile, progress),\n          reason: `基于你完成的《${completedCourse.title}》`,\n          type: 'related'\n        });\n      });\n      \n      // 推荐下一级别的课程\n      const nextLevel = getNextLevel(completedCourse.level);\n      if (nextLevel) {\n        const nextLevelCourses = allCourses.filter(c => \n          !completedCourses.includes(c.id) &&\n          c.level === nextLevel &&\n          (c.prerequisites.length === 0 || c.prerequisites.some(prereq => completedCourses.includes(prereq)))\n        );\n        \n        nextLevelCourses.forEach(course => {\n          recommendations.push({\n            course_id: course.id,\n            score: calculateRecommendationScore(course, userProfile, progress) + 10, // 稍高分数\n            reason: `进阶学习：${nextLevel}级别`,\n            type: 'next_level'\n          });\n        });\n      }\n    }\n  }\n  \n  // 3. 热门课程推荐\n  const trendingCourses = await getTrendingCourses();\n  trendingCourses.forEach(course => {\n    if (!completedCourses.includes(course.id)) {\n      recommendations.push({\n        course_id: course.id,\n        score: calculateRecommendationScore(course, userProfile, progress) + 5,\n        reason: '热门课程',\n        type: 'trending'\n      });\n    }\n  });\n  \n  // 去重并按分数排序\n  const uniqueRecommendations = recommendations.reduce((acc, rec) => {\n    const existing = acc.find(r => r.course_id === rec.course_id);\n    if (!existing || existing.score < rec.score) {\n      return [...acc.filter(r => r.course_id !== rec.course_id), rec];\n    }\n    return acc;\n  }, [] as LearningRecommendation[]);\n  \n  return uniqueRecommendations\n    .sort((a, b) => b.score - a.score)\n    .slice(0, 6); // 返回前6个推荐\n}\n\n// 计算推荐分数\nfunction calculateRecommendationScore(\n  course: Course, \n  userProfile: UserLearningProfile, \n  progress: UserLearningProgress\n): number {\n  let score = 50; // 基础分数\n  \n  // 难度匹配度\n  const difficultyMatch = 10 - Math.abs(course.difficulty_score - userProfile.preferred_difficulty);\n  score += difficultyMatch * 2;\n  \n  // 主题匹配度\n  const topicMatches = course.tags.filter(tag => \n    userProfile.preferred_topics.includes(tag)\n  ).length;\n  score += topicMatches * 5;\n  \n  // 学习风格匹配\n  if (userProfile.learning_style === 'interactive' && course.level === 'Beginner') {\n    score += 10;\n  }\n  \n  // 完成率考虑\n  const courseProgress = progress.course_progress.find(cp => cp.course_id === course.id);\n  if (courseProgress) {\n    if (courseProgress.is_completed) {\n      score = 0; // 已完成的不推荐\n    } else {\n      score += 20; // 已开始但未完成的增加分数\n    }\n  }\n  \n  return Math.min(100, Math.max(0, score));\n}\n\n// 获取下一级别\nfunction getNextLevel(currentLevel: string): string | null {\n  switch (currentLevel) {\n    case 'Beginner': return 'Intermediate';\n    case 'Intermediate': return 'Advanced';\n    default: return null;\n  }\n}\n\n// 获取用户学习档案\nexport async function getUserLearningProfile(userId: string): Promise<UserLearningProfile> {\n  if (!userProfiles[userId]) {\n    // 默认档案\n    userProfiles[userId] = {\n      user_id: userId,\n      preferred_difficulty: 5,\n      preferred_topics: ['programming', 'web development'],\n      learning_style: 'interactive',\n      weekly_goal_hours: 10,\n      study_time_preference: 'flexible'\n    };\n  }\n  return userProfiles[userId];\n}\n\n// 更新学习档案\nexport async function updateUserLearningProfile(\n  userId: string, \n  profile: Partial<UserLearningProfile>\n): Promise<void> {\n  const currentProfile = await getUserLearningProfile(userId);\n  userProfiles[userId] = { ...currentProfile, ...profile };\n}\n\n// 记录学习活动\nexport async function recordLearningActivity(\n  userId: string,\n  courseId: string,\n  lessonId: string | undefined,\n  activityType: LearningActivity['activity_type'],\n  score?: number,\n  timeSpent?: number\n): Promise<void> {\n  const activity: LearningActivity = {\n    id: `${userId}_${Date.now()}`,\n    user_id: userId,\n    course_id: courseId,\n    lesson_id: lessonId,\n    activity_type: activityType,\n    timestamp: new Date(),\n    score,\n    time_spent: timeSpent\n  };\n  \n  learningActivities.push(activity);\n  \n  // 更新学习连击\n  await updateLearningStreak(userId);\n}\n\n// 更新学习连击\nasync function updateLearningStreak(userId: string): Promise<void> {\n  const progress = await getUserLearningProgress(userId);\n  const today = new Date();\n  const lastStudy = new Date(progress.last_study_date);\n  \n  const daysDiff = Math.floor((today.getTime() - lastStudy.getTime()) / (1000 * 60 * 60 * 24));\n  \n  if (daysDiff === 1) {\n    // 连续学习\n    progress.learning_streak += 1;\n    progress.overall_stats.current_streak += 1;\n    progress.overall_stats.longest_streak = Math.max(\n      progress.overall_stats.longest_streak,\n      progress.overall_stats.current_streak\n    );\n  } else if (daysDiff > 1) {\n    // 中断，重置连击\n    progress.learning_streak = 1;\n    progress.overall_stats.current_streak = 1;\n  }\n  \n  progress.last_study_date = today;\n  \n  // 检查连击成就\n  if (progress.learning_streak === 7) {\n    await addAchievement(userId, {\n      id: 'streak_7',\n      title: '学习达人',\n      description: '连续学习7天！',\n      icon_url: '/achievements/streak-7.png',\n      earned_date: new Date(),\n      rarity: 'rare',\n      category: 'streak'\n    });\n  }\n}\n\n// 添加成就\nasync function addAchievement(userId: string, achievement: Achievement): Promise<void> {\n  const progress = await getUserLearningProgress(userId);\n  const existing = progress.achievements.find(a => a.id === achievement.id);\n  \n  if (!existing) {\n    progress.achievements.push(achievement);\n  }\n}\n\n// 更新总体统计\nfunction updateOverallStats(progress: UserLearningProgress): void {\n  const stats = progress.overall_stats;\n  \n  stats.total_courses_completed = progress.course_progress.filter(cp => cp.is_completed).length;\n  stats.total_lessons_completed = progress.course_progress.reduce((total, cp) => \n    total + cp.completed_lessons.length, 0\n  );\n  stats.total_study_time_hours = progress.course_progress.reduce((total, cp) => \n    total + (cp.time_spent_minutes / 60), 0\n  );\n  \n  // 计算平均分\n  const totalScore = progress.course_progress.reduce((total, cp) => total + cp.total_score, 0);\n  const totalLessons = progress.course_progress.reduce((total, cp) => \n    total + cp.completed_lessons.length, 0\n  );\n  stats.average_score = totalLessons > 0 ? totalScore / totalLessons : 0;\n}\n\n// 模拟数据获取函数（实际项目中应该连接真实数据库）\nasync function getAllCourses(): Promise<Course[]> {\n  // 这里应该从数据库获取，现在返回模拟数据\n  return [\n    {\n      id: 'course_1',\n      title: 'React 基础教程',\n      level: 'Beginner',\n      description: '学习 React 基础知识',\n      cover_url: 'https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=React+programming+course+cover+modern+colorful+design&image_size=landscape_4_3',\n      lessons_count: 10,\n      prerequisites: [],\n      tags: ['react', 'javascript', 'frontend'],\n      estimated_hours: 15,\n      difficulty_score: 3\n    },\n    {\n      id: 'course_2',\n      title: 'Next.js 进阶',\n      level: 'Intermediate',\n      description: '深入学习 Next.js 框架',\n      cover_url: 'https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=Next.js+advanced+course+cover+sleek+modern+design&image_size=landscape_4_3',\n      lessons_count: 12,\n      prerequisites: ['course_1'],\n      tags: ['nextjs', 'react', 'fullstack'],\n      estimated_hours: 20,\n      difficulty_score: 6\n    },\n    {\n      id: 'course_3',\n      title: 'TypeScript 实战',\n      level: 'Advanced',\n      description: 'TypeScript 高级特性和最佳实践',\n      cover_url: 'https://trae-api-sg.mchost.guru/api/ide/v1/text_to_image?prompt=TypeScript+advanced+course+cover+professional+design&image_size=landscape_4_3',\n      lessons_count: 15,\n      prerequisites: ['course_1', 'course_2'],\n      tags: ['typescript', 'javascript', 'type-safety'],\n      estimated_hours: 25,\n      difficulty_score: 8\n    }\n  ];\n}\n\nasync function getCourseById(courseId: string): Promise<Course | undefined> {\n  const courses = await getAllCourses();\n  return courses.find(c => c.id === courseId);\n}\n\nasync function getTrendingCourses(): Promise<Course[]> {\n  const courses = await getAllCourses();\n  // 模拟热门课程（基于最近活动）\n  const recentActivities = learningActivities.filter(\n    activity => activity.timestamp > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)\n  );\n  \n  const coursePopularity = new Map<string, number>();\n  recentActivities.forEach(activity => {\n    const count = coursePopularity.get(activity.course_id) || 0;\n    coursePopularity.set(activity.course_id, count + 1);\n  });\n  \n  return courses\n    .filter(course => coursePopularity.has(course.id))\n    .sort((a, b) => (coursePopularity.get(b.id) || 0) - (coursePopularity.get(a.id) || 0))\n    .slice(0, 3);\n}\n\n// 获取学习统计\nexport async function getLearningStats(userId: string): Promise<LearningStats> {\n  const progress = await getUserLearningProgress(userId);\n  return progress.overall_stats;\n}\n\n// 获取用户成就\nexport async function getUserAchievements(userId: string): Promise<Achievement[]> {\n  const progress = await getUserLearningProgress(userId);\n  return progress.achievements.sort((a, b) => \n    b.earned_date.getTime() - a.earned_date.getTime()\n  );\n}\n\n// 英语课程数据（用于传统课程页面）\nconst englishCourses: Course[] = [\n  {\n    id: 'course-a1',\n    title: 'English Foundations A1',\n    level: 'Beginner',\n    description:\n      'Master the basics: phonetics, greetings, numbers, simple sentences.',\n    cover_url: '/opengraph-image.png',\n    lessons_count: 8,\n    prerequisites: [],\n    tags: ['english', 'beginner', 'foundation'],\n    estimated_hours: 20,\n    difficulty_score: 2\n  },\n  {\n    id: 'course-b1',\n    title: 'English Conversation B1',\n    level: 'Intermediate',\n    description:\n      'Develop everyday conversation skills and listening comprehension.',\n    cover_url: '/hero-mobile.png',\n    lessons_count: 12,\n    prerequisites: ['course-a1'],\n    tags: ['english', 'conversation', 'intermediate'],\n    estimated_hours: 30,\n    difficulty_score: 5\n  },\n  {\n    id: 'course-c1',\n    title: 'Academic English C1',\n    level: 'Advanced',\n    description:\n      'Focus on academic writing, presentations, and critical reading.',\n    cover_url: '/hero-desktop.png',\n    lessons_count: 10,\n    prerequisites: ['course-b1'],\n    tags: ['english', 'academic', 'advanced'],\n    estimated_hours: 25,\n    difficulty_score: 8\n  },\n];\n\nconst englishLessons: Lesson[] = [\n  {\n    id: 'lesson-a1-01',\n    course_id: 'course-a1',\n    title: 'Alphabet & Sounds',\n    objective: 'Recognize basic English letters and common sounds.',\n    content:\n      'Introduction to English alphabet.\\nPractice phonetics.\\nCommon vowel sounds.',\n    duration_min: 20,\n    order_index: 1,\n  },\n  {\n    id: 'lesson-a1-02',\n    course_id: 'course-a1',\n    title: 'Greetings & Introductions',\n    objective: 'Use greetings and introduce yourself.',\n    content:\n      'Hi, Hello, Good morning.\\nHow to introduce yourself with simple sentences.',\n    duration_min: 25,\n    order_index: 2,\n  },\n  {\n    id: 'lesson-b1-01',\n    course_id: 'course-b1',\n    title: 'Small Talk Basics',\n    objective: 'Engage in small talk about weather, hobbies, and news.',\n    content:\n      'Small talk starters.\\nPolite responses and follow-up questions.\\nRole-play examples.',\n    duration_min: 30,\n    order_index: 1,\n  },\n];\n\nconst englishQuiz: QuizQuestion[] = [\n  {\n    id: 'q-a1-02-1',\n    lesson_id: 'lesson-a1-02',\n    prompt: 'Choose the correct greeting for morning.',\n    choices: [\n      { id: 'c1', text: 'Good morning', correct: true },\n      { id: 'c2', text: 'Good night', correct: false },\n      { id: 'c3', text: 'See you', correct: false },\n    ],\n  },\n];\n\n// 英语课程相关函数（用于传统课程页面）\nexport async function fetchCourses(query = ''): Promise<Course[]> {\n  const q = query.trim().toLowerCase();\n  return englishCourses\n    .filter((c) => {\n      if (!q) return true;\n      return (\n        c.title.toLowerCase().includes(q) ||\n        c.level.toLowerCase().includes(q) ||\n        c.description.toLowerCase().includes(q)\n      );\n    })\n    .sort((a, b) => a.title.localeCompare(b.title));\n}\n\nexport async function fetchCourseById(id: string): Promise<Course | undefined> {\n  return englishCourses.find((c) => c.id === id);\n}\n\nexport async function fetchLessonsByCourseId(\n  courseId: string,\n): Promise<Lesson[]> {\n  return englishLessons.filter((l) => l.course_id === courseId);\n}\n\nexport async function fetchLessonById(id: string): Promise<Lesson | undefined> {\n  return englishLessons.find((l) => l.id === id);\n}\n\nexport async function fetchQuizByLessonId(\n  lessonId: string,\n): Promise<QuizQuestion[]> {\n  return englishQuiz.filter((q) => q.lesson_id === lessonId);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/search.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/nextjs1/app/ui/search.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/nextjs1/app/ui/search.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,kZAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6R,GAC1T,2DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/search.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/nextjs1/app/ui/search.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/nextjs1/app/ui/search.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,kZAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyQ,GACtS,uCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 555, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/learn/courses/page.tsx"],"sourcesContent":["import { Suspense } from 'react';\nimport { fetchCourses } from '@/app/lib/learn-data';\nimport Search from '@/app/ui/search';\n\nasync function CourseGrid({ query }: { query: string }) {\n  const courses = await fetchCourses(query);\n  return (\n    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n      {courses.map((c) => (\n        <a\n          key={c.id}\n          href={`/learn/courses/${c.id}`}\n          className=\"rounded-xl bg-gray-50 p-4 hover:bg-gray-100\"\n        >\n          <div className=\"h-32 w-full overflow-hidden rounded bg-white\">\n            {/* 简化：用背景图模拟封面 */}\n            <div\n              className=\"h-full w-full bg-cover bg-center\"\n              style={{ backgroundImage: `url(${c.cover_url})` }}\n            />\n          </div>\n          <h3 className=\"mt-3 text-lg font-semibold\">{c.title}</h3>\n          <p className=\"text-sm text-gray-600\">{c.level}</p>\n          <p className=\"mt-2 text-sm text-gray-700 line-clamp-2\">\n            {c.description}\n          </p>\n          <p className=\"mt-2 text-xs text-gray-500\">\n            {c.lessons_count} lessons\n          </p>\n        </a>\n      ))}\n    </div>\n  );\n}\n\nexport default async function Page(props: {\n  searchParams?: Promise<{ query?: string }>;\n}) {\n  const sp = await props.searchParams;\n  const query = sp?.query || '';\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-xl font-semibold\">Courses</h2>\n      </div>\n      <Search />\n      <Suspense key={query} fallback={<div>Loading courses...</div>}>\n        <CourseGrid query={query} />\n      </Suspense>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAEA,eAAe,WAAW,EAAE,KAAK,EAAqB;IACpD,MAAM,UAAU,MAAM,IAAA,sJAAY,EAAC;IACnC,qBACE,wXAAC;QAAI,WAAU;kBACZ,QAAQ,GAAG,CAAC,CAAC,kBACZ,wXAAC;gBAEC,MAAM,CAAC,eAAe,EAAE,EAAE,EAAE,EAAE;gBAC9B,WAAU;;kCAEV,wXAAC;wBAAI,WAAU;kCAEb,cAAA,wXAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,iBAAiB,CAAC,IAAI,EAAE,EAAE,SAAS,CAAC,CAAC,CAAC;4BAAC;;;;;;;;;;;kCAGpD,wXAAC;wBAAG,WAAU;kCAA8B,EAAE,KAAK;;;;;;kCACnD,wXAAC;wBAAE,WAAU;kCAAyB,EAAE,KAAK;;;;;;kCAC7C,wXAAC;wBAAE,WAAU;kCACV,EAAE,WAAW;;;;;;kCAEhB,wXAAC;wBAAE,WAAU;;4BACV,EAAE,aAAa;4BAAC;;;;;;;;eAjBd,EAAE,EAAE;;;;;;;;;;AAuBnB;AAEe,eAAe,KAAK,KAElC;IACC,MAAM,KAAK,MAAM,MAAM,YAAY;IACnC,MAAM,QAAQ,IAAI,SAAS;IAC3B,qBACE,wXAAC;QAAI,WAAU;;0BACb,wXAAC;gBAAI,WAAU;0BACb,cAAA,wXAAC;oBAAG,WAAU;8BAAwB;;;;;;;;;;;0BAExC,wXAAC,0IAAM;;;;;0BACP,wXAAC,2VAAQ;gBAAa,wBAAU,wXAAC;8BAAI;;;;;;0BACnC,cAAA,wXAAC;oBAAW,OAAO;;;;;;eADN;;;;;;;;;;;AAKrB","debugId":null}}]
}