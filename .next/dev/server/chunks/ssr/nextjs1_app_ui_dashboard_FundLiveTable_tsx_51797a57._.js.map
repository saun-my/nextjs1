{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/saunmy/Desktop/nextjs1/nextjs1/app/ui/dashboard/FundLiveTable.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\n\ntype FundItem = {\n  code: string;\n  name: string;\n  net: number | null;\n  dayGrowth: number;\n  lastUpdate: string | null;\n  type: string;\n};\n\nexport default function FundLiveTable() {\n  const [list, setList] = useState<FundItem[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function load() {\n    try {\n      setLoading(true);\n      setError(null);\n      const res = await fetch('/api/funds/list', { cache: 'no-store' });\n      const data = await res.json();\n      setList(Array.isArray(data.list) ? data.list : []);\n    } catch (e: any) {\n      setError(e?.message || '加载失败');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    load();\n    const id = setInterval(load, 30000);\n    return () => clearInterval(id);\n  }, []);\n\n  return (\n    <div className=\"overflow-x-auto\">\n      <div className=\"flex items-center justify-between px-6 py-4\">\n        <div className=\"text-lg font-semibold\">今日热门基金</div>\n        <button onClick={load} className=\"px-3 py-1 text-sm rounded bg-blue-600 text-white\">刷新</button>\n      </div>\n      {error && (\n        <div className=\"px-6 pb-2 text-sm text-red-600\">{error}</div>\n      )}\n      <table className=\"min-w-full\">\n        <thead className=\"bg-gray-50\">\n          <tr>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">代码</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">名称</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">日涨跌</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">净值</th>\n            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500\">更新时间</th>\n          </tr>\n        </thead>\n        <tbody>\n          {list.map((f) => (\n            <tr key={f.code} className=\"border-t\">\n              <td className=\"px-6 py-3\">{f.code}</td>\n              <td className=\"px-6 py-3\">{f.name}</td>\n              <td className={`px-6 py-3 ${Number(f.dayGrowth) >= 0 ? 'text-green-600' : 'text-red-600'}`}>{f.dayGrowth}%</td>\n              <td className=\"px-6 py-3\">{f.net ?? '-'}</td>\n              <td className=\"px-6 py-3 text-xs text-gray-500\">{f.lastUpdate ?? '-'}</td>\n            </tr>\n          ))}\n          {list.length === 0 && !loading && (\n            <tr>\n              <td className=\"px-6 py-8 text-center text-gray-500\" colSpan={5}>暂无数据</td>\n            </tr>\n          )}\n          {loading && (\n            <tr>\n              <td className=\"px-6 py-8 text-center text-gray-500\" colSpan={5}>加载中...</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAae,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2VAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2VAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,2VAAQ,EAAgB;IAElD,eAAe;QACb,IAAI;YACF,WAAW;YACX,SAAS;YACT,MAAM,MAAM,MAAM,MAAM,mBAAmB;gBAAE,OAAO;YAAW;YAC/D,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,MAAM,OAAO,CAAC,KAAK,IAAI,IAAI,KAAK,IAAI,GAAG,EAAE;QACnD,EAAE,OAAO,GAAQ;YACf,SAAS,GAAG,WAAW;QACzB,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,4VAAS,EAAC;QACR;QACA,MAAM,KAAK,YAAY,MAAM;QAC7B,OAAO,IAAM,cAAc;IAC7B,GAAG,EAAE;IAEL,qBACE,wXAAC;QAAI,WAAU;;0BACb,wXAAC;gBAAI,WAAU;;kCACb,wXAAC;wBAAI,WAAU;kCAAwB;;;;;;kCACvC,wXAAC;wBAAO,SAAS;wBAAM,WAAU;kCAAmD;;;;;;;;;;;;YAErF,uBACC,wXAAC;gBAAI,WAAU;0BAAkC;;;;;;0BAEnD,wXAAC;gBAAM,WAAU;;kCACf,wXAAC;wBAAM,WAAU;kCACf,cAAA,wXAAC;;8CACC,wXAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,wXAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,wXAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,wXAAC;oCAAG,WAAU;8CAAwD;;;;;;8CACtE,wXAAC;oCAAG,WAAU;8CAAwD;;;;;;;;;;;;;;;;;kCAG1E,wXAAC;;4BACE,KAAK,GAAG,CAAC,CAAC,kBACT,wXAAC;oCAAgB,WAAU;;sDACzB,wXAAC;4CAAG,WAAU;sDAAa,EAAE,IAAI;;;;;;sDACjC,wXAAC;4CAAG,WAAU;sDAAa,EAAE,IAAI;;;;;;sDACjC,wXAAC;4CAAG,WAAW,CAAC,UAAU,EAAE,OAAO,EAAE,SAAS,KAAK,IAAI,mBAAmB,gBAAgB;;gDAAG,EAAE,SAAS;gDAAC;;;;;;;sDACzG,wXAAC;4CAAG,WAAU;sDAAa,EAAE,GAAG,IAAI;;;;;;sDACpC,wXAAC;4CAAG,WAAU;sDAAmC,EAAE,UAAU,IAAI;;;;;;;mCAL1D,EAAE,IAAI;;;;;4BAQhB,KAAK,MAAM,KAAK,KAAK,CAAC,yBACrB,wXAAC;0CACC,cAAA,wXAAC;oCAAG,WAAU;oCAAsC,SAAS;8CAAG;;;;;;;;;;;4BAGnE,yBACC,wXAAC;0CACC,cAAA,wXAAC;oCAAG,WAAU;oCAAsC,SAAS;8CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO9E","debugId":null}}]
}